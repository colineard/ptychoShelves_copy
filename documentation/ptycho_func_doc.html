

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ptycho package documentation &mdash; PtychoShelves  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Academic License Agreement" href="ptycho_license.html" />
    <link rel="prev" title="base package documentation" href="base_func_doc.html" />
    <link href="_static/mod_theme.css" rel="stylesheet" type="text/css">


  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> PtychoShelves
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">PtychoShelves</a></li>
<li class="toctree-l1"><a class="reference internal" href="template_ptycho.html">template_ptycho - your virtual control room</a></li>
<li class="toctree-l1"><a class="reference internal" href="new_beamline.html">How to add support for a beamline</a></li>
<li class="toctree-l1"><a class="reference internal" href="base_func_doc.html">base package documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ptycho package documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#core">+core</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#core-fpm">+core/+FPM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#core-private">+core/private</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#detector">+detector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#detector-eiger">+detector/+eiger</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detector-eiger1p5m">+detector/+eiger1p5M</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detector-eiger4m-swing">+detector/+eiger4M_swing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detector-eiger9m">+detector/+eiger9M</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detector-moench">+detector/+moench</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detector-oldeiger">+detector/+oldeiger</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detector-pco-nano">+detector/+pco_nano</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detector-pilatus">+detector/+pilatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detector-prep-data">+detector/+prep_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detector-prep-data-libdetxr">+detector/+prep_data/+libDetXR</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detector-prep-data-matlab-ps">+detector/+prep_data/+matlab_ps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detector-virtual">+detector/+virtual</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detector-virtual-private">+detector/+virtual/private</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#engines">+engines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#engines-dm">+engines/+DM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#engines-gpu">+engines/+GPU</a></li>
<li class="toctree-l3"><a class="reference internal" href="#engines-gpu-private">+engines/+GPU/private</a></li>
<li class="toctree-l3"><a class="reference internal" href="#engines-ml">+engines/+ML</a></li>
<li class="toctree-l3"><a class="reference internal" href="#engines-ml-ms">+engines/+ML_MS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#engines-c-solver">+engines/+c_solver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#scans">+scans</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scans-meta">+scans/+meta</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scans-positions">+scans/+positions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scans-queue">+scans/+queue</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scans-queue-check-queue">+scans/+queue/+check_queue</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scans-queue-check-queue-private">+scans/+queue/+check_queue/private</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scans-queue-update-queue">+scans/+queue/+update_queue</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#analysis">analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#analysis-s00648">analysis/S00648</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analysis-s00649">analysis/S00649</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analysis-online">analysis/online</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analysis-online-ptycho">analysis/online/ptycho</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tests">tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tests-temp">tests/temp</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#utils">utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#utils-soleil">utils/+soleil</a></li>
<li class="toctree-l3"><a class="reference internal" href="#utils-imgs">utils/imgs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ptycho_license.html">Academic License Agreement</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PtychoShelves</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>ptycho package documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/ptycho_func_doc.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ptycho-package-documentation">
<h1>ptycho package documentation<a class="headerlink" href="#ptycho-package-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<dl class="object">
<dt>
<code class="descname">GPU_batch_solver</code></dt>
<dd><div class="line-block">
<div class="line">GPU_BATCH_SOLVER</div>
<div class="line">multi GPU batch solver</div>
</div>
<div class="line-block">
<div class="line">use parallel toolbox to distribute tasks into several asynchronously</div>
<div class="line">running workers</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">affine_matrix_search</code></dt>
<dd><div class="line-block">
<div class="line">AFFINE_MATRIX_SEARCH</div>
<div class="line">Code to evaluate the affine matrix angle for a series of</div>
<div class="line">reconstructions</div>
</div>
<div class="line-block">
<div class="line">Each reconstruction should have preffix ‘affine’ in the name</div>
<div class="line">and contain a field called p.affine_angle</div>
</div>
<div class="line-block">
<div class="line">see also <span class="xref std std-ref">aligned_FSC_template</span></div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">affine_test</code></dt>
<dd><div class="line-block">
<div class="line">close all</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">aligned_FSC_template</code></dt>
<dd><div class="line-block">
<div class="line">ALIGNED_FSC_TEMPLATE</div>
<div class="line">Script to align images and compute FSC</div>
</div>
<div class="line-block">
<div class="line">References relevant to this code:</div>
<div class="line">For using this FSC code with ptychography: J. Vila-Comamala, et al., “Characterization of high-resolution diffractive X-ray optics by ptychographic coherent diffractive imaging,” Opt. Express 19, 21333-21344 (2011).</div>
<div class="line">For subpixel alignment: M. Guizar-Sicairos, et al., “Efficient subpixel image registration algorithms,” Opt. Lett. 33, 156 (2008).</div>
<div class="line">For matching of phase ramp by approximate least squared error:  M. Guizar-Sicairos, et al., “Phase tomography from x-ray coherent diffractive imaging projections,” Opt. Express 19, 21345-21357 (2011).</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">colorbar_complex</code></dt>
<dd><div class="line-block">
<div class="line">colorbar_complex is a script.</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">complex_colorbar</code></dt>
<dd><div class="line-block">
<div class="line">UNTITLED2 Summary of this class goes here</div>
<div class="line">Detailed explanation goes here</div>
<div class="line">Reference page in Doc Center</div>
<div class="line">doc complex_colorbar</div>
</div>
</dd></dl>

<span class="target" id="ptycho-create-template"></span><dl class="function">
<dt id="create_template">
<code class="descname">create_template</code><span class="sig-paren">(</span><em>s</em>, <em>var</em><span class="sig-paren">)</span><a class="headerlink" href="#create_template" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">create_template is a function.</div>
<div class="line">create_template(s, var)</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">delta_vs_beta</code></dt>
<dd><div class="line-block">
<div class="line">delta_vs_beta is a script.</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">external_call</code></dt>
<dd><div class="line-block">
<div class="line">% modify this section %%%</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">find_peaks</code></dt>
<dd><div class="line-block">
<div class="line">FIND_PEAKS</div>
<div class="line">Routine to find diffraction peaks of a grating and compute its angle</div>
<div class="line">and the distance to the detector</div>
<div class="line">Be careful to avoid saturation of the center pixel as it will affect</div>
<div class="line">the calculaton</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">multilens</code></dt>
<dd><div class="line-block">
<div class="line">settings</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">offline_ptycho_et</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">propagation_test</code></dt>
<dd><div class="line-block">
<div class="line">propagation_test is a script.</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">ptycho_online</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">ptycho_wrap_offline_28scans_20131023_affine_stitch_500_67_89</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">ref_plot</code></dt>
<dd><div class="line-block">
<div class="line">ref_plot is a script.</div>
</div>
</dd></dl>

<span class="target" id="ptycho-setup-recons"></span><dl class="function">
<dt id="setup_recons">
<code class="descname">setup_recons</code><span class="sig-paren">(</span><em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#setup_recons" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">SETUP_RECONS MATLAB code for setup_recons.fig</div>
<div class="line">SETUP_RECONS, by itself, creates a new SETUP_RECONS or raises the existing</div>
<div class="line">singleton*.</div>
</div>
<div class="line-block">
<div class="line">H = SETUP_RECONS returns the handle to a new SETUP_RECONS or the handle to</div>
<div class="line">the existing singleton*.</div>
</div>
<div class="line-block">
<div class="line">SETUP_RECONS(‘CALLBACK’,hObject,eventData,handles,…) calls the local</div>
<div class="line">function named CALLBACK in SETUP_RECONS.M with the given input arguments.</div>
</div>
<div class="line-block">
<div class="line">SETUP_RECONS(‘Property’,’Value’,…) creates a new SETUP_RECONS or raises the</div>
<div class="line">existing singleton*.  Starting from the left, property value pairs are</div>
<div class="line">applied to the GUI before setup_recons_OpeningFcn gets called.  An</div>
<div class="line">unrecognized property name or invalid value makes property application</div>
<div class="line">stop.  All inputs are passed to setup_recons_OpeningFcn via varargin.</div>
</div>
<div class="line-block">
<div class="line"><a href="#id1"><span class="problematic" id="id2">*</span></a>See GUI Options on GUIDE’s Tools menu.  Choose “GUI allows only one</div>
<div class="line">instance to run (singleton)”.</div>
</div>
<div class="line-block">
<div class="line">See also: GUIDE, GUIDATA, GUIHANDLES</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">varargout</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-setup-remote-recons"></span><dl class="function">
<dt id="setup_remote_recons">
<code class="descname">setup_remote_recons</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#setup_remote_recons" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">SETUP_REMOTE_RECONS</div>
</div>
</dd></dl>

<span class="target" id="ptycho-setup-template"></span><dl class="function">
<dt id="setup_template">
<code class="descname">setup_template</code><span class="sig-paren">(</span><em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#setup_template" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">SETUP_TEMPLATE</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">setup_template_backup</code></dt>
<dd><div class="line-block">
<div class="line">Academic License Agreement</div>
</div>
<div class="line-block">
<div class="line">Source Code</div>
</div>
<div class="line-block">
<div class="line">Introduction</div>
<div class="line">•    This license agreement sets forth the terms and conditions under which the PAUL SCHERRER INSTITUT (PSI), CH-5232 Villigen-PSI, Switzerland (hereafter “LICENSOR”)</div>
<div class="line">will grant you (hereafter “LICENSEE”) a royalty-free, non-exclusive license for academic, non-commercial purposes only (hereafter “LICENSE”) to use the cSAXS</div>
<div class="line">ptychography MATLAB package computer software program and associated documentation furnished hereunder (hereafter “PROGRAM”).</div>
</div>
<div class="line-block">
<div class="line">Terms and Conditions of the LICENSE</div>
<div class="line">1.   LICENSOR grants to LICENSEE a royalty-free, non-exclusive license to use the PROGRAM for academic, non-commercial purposes, upon the terms and conditions</div>
<div class="line">hereinafter set out and until termination of this license as set forth below.</div>
<div class="line">2.   LICENSEE acknowledges that the PROGRAM is a research tool still in the development stage. The PROGRAM is provided without any related services, improvements</div>
<div class="line">or warranties from LICENSOR and that the LICENSE is entered into in order to enable others to utilize the PROGRAM in their academic activities. It is the</div>
<div class="line">LICENSEE’s responsibility to ensure its proper use and the correctness of the results.”</div>
<div class="line">3.   THE PROGRAM IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR</div>
<div class="line">A PARTICULAR PURPOSE AND NONINFRINGEMENT OF ANY PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS. IN NO EVENT SHALL THE LICENSOR, THE AUTHORS OR THE COPYRIGHT</div>
<div class="line">HOLDERS BE LIABLE FOR ANY CLAIM, DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES OR OTHER LIABILITY ARISING FROM, OUT OF OR IN CONNECTION WITH THE PROGRAM OR THE USE</div>
<div class="line">OF THE PROGRAM OR OTHER DEALINGS IN THE PROGRAM.</div>
<div class="line">4.   LICENSEE agrees that it will use the PROGRAM and any modifications, improvements, or derivatives of PROGRAM that LICENSEE may create (collectively,</div>
<div class="line">“IMPROVEMENTS”) solely for academic, non-commercial purposes and that any copy of PROGRAM or derivatives thereof shall be distributed only under the same</div>
<div class="line">license as PROGRAM. The terms “academic, non-commercial”, as used in this Agreement, mean academic or other scholarly research which (a) is not undertaken for</div>
<div class="line">profit, or (b) is not intended to produce works, services, or data for commercial use, or (c) is neither conducted, nor funded, by a person or an entity engaged</div>
<div class="line">in the commercial use, application or exploitation of works similar to the PROGRAM.</div>
<div class="line">5.   LICENSEE agrees that it shall make the following acknowledgement in any publication resulting from the use of the PROGRAM or any translation of the code into</div>
<div class="line">another computing language:</div>
<div class="line">“Data processing was carried out using the cSAXS ptychography MATLAB package developed by the Science IT and the coherent X-ray scattering (CXS) groups, Paul</div>
<div class="line">Scherrer Institut, Switzerland.”</div>
</div>
<div class="line-block">
<div class="line">Additionally, any publication using the package, or any translation of the code into another computing language should cite for difference map:</div>
<div class="line">P. Thibault, M. Dierolf, A. Menzel, O. Bunk, C. David, F. Pfeiffer, High-resolution scanning X-ray diffraction microscopy, Science 321, 379–382 (2008).</div>
<div class="line">(doi: 10.1126/science.1158573),</div>
<div class="line">for maximum likelihood:</div>
<div class="line">P. Thibault and M. Guizar-Sicairos, Maximum-likelihood refinement for coherent diffractive imaging, New J. Phys. 14, 063004 (2012).</div>
<div class="line">(doi: 10.1088/1367-2630/14/6/063004),</div>
<div class="line">for mixed coherent modes:</div>
<div class="line">P. Thibault and A. Menzel, Reconstructing state mixtures from diffraction measurements, Nature 494, 68–71 (2013). (doi: 10.1038/nature11806),</div>
<div class="line">and/or for multislice:</div>
<div class="line">E. H. R. Tsai, I. Usov, A. Diaz, A. Menzel, and M. Guizar-Sicairos, X-ray ptychography with extended depth of field, Opt. Express 24, 29089–29108 (2016).</div>
<div class="line">(doi: 10.1364/OE.24.029089).</div>
<div class="line">6.   Except for the above-mentioned acknowledgment, LICENSEE shall not use the PROGRAM title or the names or logos of LICENSOR, nor any adaptation thereof, nor the</div>
<div class="line">names of any of its employees or laboratories, in any advertising, promotional or sales material without prior written consent obtained from LICENSOR in each case.</div>
<div class="line">7.   Ownership of all rights, including copyright in the PROGRAM and in any material associated therewith, shall at all times remain with LICENSOR, and LICENSEE</div>
<div class="line">agrees to preserve same. LICENSEE agrees not to use any portion of the PROGRAM or of any IMPROVEMENTS in any machine-readable form outside the PROGRAM, nor to</div>
<div class="line">make any copies except for its internal use, without prior written consent of LICENSOR. LICENSEE agrees to place the following copyright notice on any such copies:</div>
<div class="line">© All rights reserved. PAUL SCHERRER INSTITUT, Switzerland, Laboratory for Macromolecules and Bioimaging, 2017.</div>
<div class="line">8.   The LICENSE shall not be construed to confer any rights upon LICENSEE by implication or otherwise except as specifically set forth herein.</div>
<div class="line">9.   DISCLAIMER: LICENSEE shall be aware that Phase Focus Limited of Sheffield, UK has an international portfolio of patents and pending applications which relate</div>
<div class="line">to ptychography and that the PROGRAM may be capable of being used in circumstances which may fall within the claims of one or more of the Phase Focus patents,</div>
<div class="line">in particular of patent with international application number PCT/GB2005/001464. The LICENSOR explicitly declares not to indemnify the users of the software</div>
<div class="line">in case Phase Focus or any other third party will open a legal action against the LICENSEE due to the use of the program.</div>
<div class="line">10.  This Agreement shall be governed by the material laws of Switzerland and any dispute arising out of this Agreement or use of the PROGRAM shall be brought before</div>
<div class="line">the courts of Zürich, Switzerland.</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">simple_gui2</code></dt>
<dd><div class="line-block">
<div class="line">Academic License Agreement</div>
</div>
<div class="line-block">
<div class="line">Source Code</div>
</div>
<div class="line-block">
<div class="line">Introduction</div>
<div class="line">•    This license agreement sets forth the terms and conditions under which the PAUL SCHERRER INSTITUT (PSI), CH-5232 Villigen-PSI, Switzerland (hereafter “LICENSOR”)</div>
<div class="line">will grant you (hereafter “LICENSEE”) a royalty-free, non-exclusive license for academic, non-commercial purposes only (hereafter “LICENSE”) to use the cSAXS</div>
<div class="line">ptychography MATLAB package computer software program and associated documentation furnished hereunder (hereafter “PROGRAM”).</div>
</div>
<div class="line-block">
<div class="line">Terms and Conditions of the LICENSE</div>
<div class="line">1.   LICENSOR grants to LICENSEE a royalty-free, non-exclusive license to use the PROGRAM for academic, non-commercial purposes, upon the terms and conditions</div>
<div class="line">hereinafter set out and until termination of this license as set forth below.</div>
<div class="line">2.   LICENSEE acknowledges that the PROGRAM is a research tool still in the development stage. The PROGRAM is provided without any related services, improvements</div>
<div class="line">or warranties from LICENSOR and that the LICENSE is entered into in order to enable others to utilize the PROGRAM in their academic activities. It is the</div>
<div class="line">LICENSEE’s responsibility to ensure its proper use and the correctness of the results.”</div>
<div class="line">3.   THE PROGRAM IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR</div>
<div class="line">A PARTICULAR PURPOSE AND NONINFRINGEMENT OF ANY PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS. IN NO EVENT SHALL THE LICENSOR, THE AUTHORS OR THE COPYRIGHT</div>
<div class="line">HOLDERS BE LIABLE FOR ANY CLAIM, DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES OR OTHER LIABILITY ARISING FROM, OUT OF OR IN CONNECTION WITH THE PROGRAM OR THE USE</div>
<div class="line">OF THE PROGRAM OR OTHER DEALINGS IN THE PROGRAM.</div>
<div class="line">4.   LICENSEE agrees that it will use the PROGRAM and any modifications, improvements, or derivatives of PROGRAM that LICENSEE may create (collectively,</div>
<div class="line">“IMPROVEMENTS”) solely for academic, non-commercial purposes and that any copy of PROGRAM or derivatives thereof shall be distributed only under the same</div>
<div class="line">license as PROGRAM. The terms “academic, non-commercial”, as used in this Agreement, mean academic or other scholarly research which (a) is not undertaken for</div>
<div class="line">profit, or (b) is not intended to produce works, services, or data for commercial use, or (c) is neither conducted, nor funded, by a person or an entity engaged</div>
<div class="line">in the commercial use, application or exploitation of works similar to the PROGRAM.</div>
<div class="line">5.   LICENSEE agrees that it shall make the following acknowledgement in any publication resulting from the use of the PROGRAM or any translation of the code into</div>
<div class="line">another computing language:</div>
<div class="line">“Data processing was carried out using the cSAXS ptychography MATLAB package developed by the Science IT and the coherent X-ray scattering (CXS) groups, Paul</div>
<div class="line">Scherrer Institut, Switzerland.”</div>
</div>
<div class="line-block">
<div class="line">Additionally, any publication using the package, or any translation of the code into another computing language should cite for difference map:</div>
<div class="line">P. Thibault, M. Dierolf, A. Menzel, O. Bunk, C. David, F. Pfeiffer, High-resolution scanning X-ray diffraction microscopy, Science 321, 379–382 (2008).</div>
<div class="line">(doi: 10.1126/science.1158573),</div>
<div class="line">for maximum likelihood:</div>
<div class="line">P. Thibault and M. Guizar-Sicairos, Maximum-likelihood refinement for coherent diffractive imaging, New J. Phys. 14, 063004 (2012).</div>
<div class="line">(doi: 10.1088/1367-2630/14/6/063004),</div>
<div class="line">for mixed coherent modes:</div>
<div class="line">P. Thibault and A. Menzel, Reconstructing state mixtures from diffraction measurements, Nature 494, 68–71 (2013). (doi: 10.1038/nature11806),</div>
<div class="line">and/or for multislice:</div>
<div class="line">E. H. R. Tsai, I. Usov, A. Diaz, A. Menzel, and M. Guizar-Sicairos, X-ray ptychography with extended depth of field, Opt. Express 24, 29089–29108 (2016).</div>
<div class="line">(doi: 10.1364/OE.24.029089).</div>
<div class="line">6.   Except for the above-mentioned acknowledgment, LICENSEE shall not use the PROGRAM title or the names or logos of LICENSOR, nor any adaptation thereof, nor the</div>
<div class="line">names of any of its employees or laboratories, in any advertising, promotional or sales material without prior written consent obtained from LICENSOR in each case.</div>
<div class="line">7.   Ownership of all rights, including copyright in the PROGRAM and in any material associated therewith, shall at all times remain with LICENSOR, and LICENSEE</div>
<div class="line">agrees to preserve same. LICENSEE agrees not to use any portion of the PROGRAM or of any IMPROVEMENTS in any machine-readable form outside the PROGRAM, nor to</div>
<div class="line">make any copies except for its internal use, without prior written consent of LICENSOR. LICENSEE agrees to place the following copyright notice on any such copies:</div>
<div class="line">© All rights reserved. PAUL SCHERRER INSTITUT, Switzerland, Laboratory for Macromolecules and Bioimaging, 2017.</div>
<div class="line">8.   The LICENSE shall not be construed to confer any rights upon LICENSEE by implication or otherwise except as specifically set forth herein.</div>
<div class="line">9.   DISCLAIMER: LICENSEE shall be aware that Phase Focus Limited of Sheffield, UK has an international portfolio of patents and pending applications which relate</div>
<div class="line">to ptychography and that the PROGRAM may be capable of being used in circumstances which may fall within the claims of one or more of the Phase Focus patents,</div>
<div class="line">in particular of patent with international application number PCT/GB2005/001464. The LICENSOR explicitly declares not to indemnify the users of the software</div>
<div class="line">in case Phase Focus or any other third party will open a legal action against the LICENSEE due to the use of the program.</div>
<div class="line">10.  This Agreement shall be governed by the material laws of Switzerland and any dispute arising out of this Agreement or use of the PROGRAM shall be brought before</div>
<div class="line">the courts of Zürich, Switzerland.</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_artificial_data</code></dt>
<dd><div class="line-block">
<div class="line">ARTIFICIAL_DATA parameters</div>
<div class="line">Specify simulation parameters and overwrite fields for a more realistic</div>
<div class="line">simulation.</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_conversion</code></dt>
<dd><div class="line-block">
<div class="line">template_conversion is a script.</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_Eiger</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_Eiger_selfie</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_Eiger_selfie_old</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_MOENCH_FP</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_eiger_selfie</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_loop</code></dt>
<dd><div class="line-block">
<div class="line">template_ptycho_loop is a script.</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_pilatus_e16403</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_pilatus_e16403_new</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_receiver</code></dt>
<dd><div class="line-block">
<div class="line">ptycho receiver template</div>
<div class="line">execute this script on the remote machine</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_receiver_script</code></dt>
<dd><div class="line-block">
<div class="line">ptycho receiver template</div>
<div class="line">execute this script on the remote machine</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_receiver_test</code></dt>
<dd><div class="line-block">
<div class="line">ptycho receiver template</div>
<div class="line">execute this script on the remote machine</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_test_eiger</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_test_eiger_single_frame</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_test_pilatus</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_ptycho_test_pilatus_2</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_simple</code></dt>
<dd><div class="line-block">
<div class="line">template_simple is a script.</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">template_wrapper</code></dt>
<dd><div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">test_artificial_data</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">test_mod</code></dt>
<dd><div class="line-block">
<div class="line">Reconstruction parameters</div>
<div class="line">Edit only this section</div>
<div class="line">References in ptycho_recons.m</div>
</div>
<div class="line-block">
<div class="line">For 2 detector positions</div>
<div class="line">Put multiple scan numbers e.g. p.scan_number = [5 6];</div>
<div class="line">Multiple centers e.g.  p.ctr = [100 207;120 217];</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">test_ptychoshelves</code></dt>
<dd><div class="line-block">
<div class="line">TEST ALL ENGINES IN PTYCHOSHELVES TOOLKIT</div>
</div>
</dd></dl>

<div class="section" id="core">
<h2>+core<a class="headerlink" href="#core" title="Permalink to this headline">¶</a></h2>
<span class="target" id="ptycho-core-append-engine"></span><dl class="function">
<dt id="core.append_engine">
<code class="descclassname">core.</code><code class="descname">append_engine</code><span class="sig-paren">(</span><em>p</em>, <em>new_eng</em><span class="sig-paren">)</span><a class="headerlink" href="#core.append_engine" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">APPEND_ENGINE appends engine specified in new_eng to p</div>
<div class="line">Adds engines with index, starting at 0</div>
<div class="line">1st engine: p.engines.engine0</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>p</strong> – p structure</li>
<li><strong>new_eng</strong> – structure containing information about the new engine</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>p</strong> - p structure</li>
<li><strong>new_eng</strong> - empty container; useful if one does not want to propagate changes between engines</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-ptycho-recons"><span class="std std-ref">core.ptycho_recons</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-check-prepared-data"></span><dl class="function">
<dt id="core.check_prepared_data">
<code class="descclassname">core.</code><code class="descname">check_prepared_data</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.check_prepared_data" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">CHECK_PREPARED_DATA compares prepared data file with current</div>
<div class="line">reconstruction parameters. If force_update == true, data preparation will</div>
<div class="line">be forced (see core.ptycho_prepare_scans)</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>force_update</strong> - true if data preparation has be done enforced</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-ptycho-prepare-scans"><span class="std std-ref">core.ptycho_prepare_scans</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-engine-status"></span><dl class="function">
<dt id="core.engine_status">
<code class="descclassname">core.</code><code class="descname">engine_status</code><span class="sig-paren">(</span><em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#core.engine_status" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">ENGINE_STATUS use persisten variables to store error messages</div>
<div class="line">Error code: 0 for ‘everything OK’ and ~=0 for ‘error’ (return values of matlab’s system function)</div>
</div>
<div class="line-block">
<div class="line"><em>usage:</em></div>
<div class="line">engine_status(status)    to set persisten variable engine_stat to</div>
<div class="line">status</div>
</div>
<div class="line-block">
<div class="line">engine_status            to read persisten variables</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">eng_stat</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-core-errorplot"></span><dl class="function">
<dt id="core.errorplot">
<code class="descclassname">core.</code><code class="descname">errorplot</code><span class="sig-paren">(</span><em>argin</em><span class="sig-paren">)</span><a class="headerlink" href="#core.errorplot" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Build an errormetric plot vs iteration number</div>
</div>
<div class="line-block">
<div class="line"><em>usage</em></div>
<div class="line">e = errorplot         Clears the persistent variable</div>
<div class="line">e = errorplot(x)      Appends x to the persistent variable</div>
<div class="line">e = errorplot([])     Only reads the persistent variable</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">outerror</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-core-export4remote"></span><dl class="function">
<dt id="core.export4remote">
<code class="descclassname">core.</code><code class="descname">export4remote</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.export4remote" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">EXPORT4REMOTE</div>
<div class="line">Export the meta data using a .mat file for remote reconstruction</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>p</strong> - updated p structure</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-core-extract4saving"></span><dl class="function">
<dt id="core.extract4saving">
<code class="descclassname">core.</code><code class="descname">extract4saving</code><span class="sig-paren">(</span><em>p</em>, <em>append</em><span class="sig-paren">)</span><a class="headerlink" href="#core.extract4saving" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">EXTRACT4SAVING extracts datasets and parameters from p and creates HDF5</div>
<div class="line">structure</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>p</strong> – p structure</li>
<li><strong>append</strong> – boolean; true if data will be appended to an existing file</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>s</strong> - structure for save2hdf5</p>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="base_func_doc.html#base-io-hdf-save2hdf5"><span class="std std-ref">io.HDF.save2hdf5</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-find-shared-ids"></span><dl class="function">
<dt id="core.find_shared_IDs">
<code class="descclassname">core.</code><code class="descname">find_shared_IDs</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.find_shared_IDs" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FIND_SHARED_IDS find which positions belong to each object / probe</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>p</strong> - p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-initialize-ptycho"><span class="std std-ref">core.initialize_ptycho</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-generate-scan-name"></span><dl class="function">
<dt id="core.generate_scan_name">
<code class="descclassname">core.</code><code class="descname">generate_scan_name</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.generate_scan_name" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">GENERATE_SCAN_NAME</div>
<div class="line">Auxilialy function to generate scan names</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>scan_name</strong> - scan names</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-core-get-projections"></span><dl class="function">
<dt id="core.get_projections">
<code class="descclassname">core.</code><code class="descname">get_projections</code><span class="sig-paren">(</span><em>p</em>, <em>object</em>, <em>scan_id</em>, <em>obj_proj</em><span class="sig-paren">)</span><a class="headerlink" href="#core.get_projections" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">GET_PROJECTIONS</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>p</strong> – p structure</li>
<li><strong>object</strong> – full-size object</li>
<li><strong>scan_id</strong> – ID of the current scan</li>
<li><strong>obj_proj</strong> – container for object projections</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>obj_proj</strong> - updated container for object projections</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-core-hermite-like"></span><dl class="function">
<dt id="core.hermite_like">
<code class="descclassname">core.</code><code class="descname">hermite_like</code><span class="sig-paren">(</span><em>fundam</em>, <em>X</em>, <em>Y</em>, <em>M</em>, <em>N</em><span class="sig-paren">)</span><a class="headerlink" href="#core.hermite_like" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">HERMITE_LIKE</div>
<div class="line">Receives a probe and maximum x and y order M N. Based on the given probe</div>
<div class="line">and multiplying by a Hermitian function new modes are computed. The modes</div>
<div class="line">are then orthonormalized.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">H</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-core-initial-checks"></span><dl class="function">
<dt id="core.initial_checks">
<code class="descclassname">core.</code><code class="descname">initial_checks</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.initial_checks" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">INITIAL_CHECKS set default values for the most common variables</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>p</strong> - p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-initialize-ptycho"><span class="std std-ref">core.initialize_ptycho</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-initialize-ptycho"></span><dl class="function">
<dt id="core.initialize_ptycho">
<code class="descclassname">core.</code><code class="descname">initialize_ptycho</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.initialize_ptycho" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">INITIALIZE_PTYCHO</div>
<div class="line">everything that needs to be done before triggering the reconstruction. This includes</div>
<div class="line">inter alia initial checks, intial guess preparations and loading the data.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>p</strong> - p structure</li>
<li><strong>status</strong> - status flag</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-ptycho-recons"><span class="std std-ref">core.ptycho_recons</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-prep-h5data"></span><dl class="function">
<dt id="core.prep_h5data">
<code class="descclassname">core.</code><code class="descname">prep_h5data</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.prep_h5data" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PREP_H5DATA prepare data and save it to disk</div>
<div class="line">prep_h5data expects that fmask and fmag already exist, prepares them</div>
<div class="line">for the C++ code and saves everything to disk.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-ptycho-prepare-scans"><span class="std std-ref">core.ptycho_prepare_scans</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-prep-initial-object"></span><dl class="function">
<dt id="core.prep_initial_object">
<code class="descclassname">core.</code><code class="descname">prep_initial_object</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.prep_initial_object" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PREPARE_INITIAL_OBJECT</div>
<div class="line">prepare an initial guess for the object reconstruction</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>p</strong> - p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-prepare-init-guess"><span class="std std-ref">core.prepare_init_guess</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-prepare-init-guess"></span><dl class="function">
<dt id="core.prepare_init_guess">
<code class="descclassname">core.</code><code class="descname">prepare_init_guess</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.prepare_init_guess" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PREPARE_INIT_GUESS</div>
<div class="line">prepare an initial guess for the object and probe reconstruction</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>p</strong> - p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-prepare-init-guess"><span class="std std-ref">core.prepare_init_guess</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-prepare-probes"></span><dl class="function">
<dt id="core.prepare_probes">
<code class="descclassname">core.</code><code class="descname">prepare_probes</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.prepare_probes" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Prepare probe - Only single file supported, either the file has a 3D matrix</div>
<div class="line">of many probes or the probe will be repeated for the number of probes</div>
<div class="line">needed for reconstruction</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-core-probe-modes-ortho"></span><dl class="function">
<dt id="core.probe_modes_ortho">
<code class="descclassname">core.</code><code class="descname">probe_modes_ortho</code><span class="sig-paren">(</span><em>modes</em><span class="sig-paren">)</span><a class="headerlink" href="#core.probe_modes_ortho" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">ORTHO Orthogonalize the given list of modes using SVD.</div>
<div class="line">[pr, I_n, eval] = probe_modes_ortho(modes)</div>
<div class="line">pr        Orthogonalized (eigen) modes</div>
<div class="line">I_n       Normalized intensity of the mode (relative contribution to total intensity)</div>
<div class="line">eval      SVD eigenvalues</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">pr, I_n, eval</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-core-ptycho-adjust-positions"></span><dl class="function">
<dt id="core.ptycho_adjust_positions">
<code class="descclassname">core.</code><code class="descname">ptycho_adjust_positions</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.ptycho_adjust_positions" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PTYCHO_ADJUST_POSITIONS</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-core-ptycho-model-probe"></span><dl class="function">
<dt id="core.ptycho_model_probe">
<code class="descclassname">core.</code><code class="descname">ptycho_model_probe</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.ptycho_model_probe" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">pout = ptycho_model_probe(p)</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">pout</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-core-ptycho-plot-ptycho"></span><dl class="function">
<dt id="core.ptycho_plot_ptycho">
<code class="descclassname">core.</code><code class="descname">ptycho_plot_ptycho</code><span class="sig-paren">(</span><em>p</em>, <em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#core.ptycho_plot_ptycho" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">% PTYCHO_PLOT_PTYCHO plotting routine for ptychographic reconstructions</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure from a ptychographic reconstruction</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><em>optional</em></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>use_display</strong> – show plots (default: true)</li>
<li><strong>write_jpegs</strong> – write images to disk (default: false)</li>
<li><strong>final</strong> – show all error metrics for a final plot (default: false)</li>
<li><strong>save_path</strong> – change default save_path (p.save_path) for saving jpgs</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">EXAMPLES:</div>
<div class="line">core.ptycho_plot_ptycho(p);</div>
<div class="line">core.ptycho_plot_ptycho(p, ‘write_jpegs’, true);</div>
<div class="line">core.ptycho_plot_ptycho(p, ‘use_display’, false, ‘write_jpegs’, true);</div>
</div>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="base_func_doc.html#base-plotting-ptycho-show-recons"><span class="std std-ref">plotting.ptycho_show_recons</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-ptycho-prepare-paths"></span><dl class="function">
<dt id="core.ptycho_prepare_paths">
<code class="descclassname">core.</code><code class="descname">ptycho_prepare_paths</code><span class="sig-paren">(</span><em>p</em>, <em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#core.ptycho_prepare_paths" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PTYCHO_PREPARE_PATHS Prepare paths and check defaults</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-core-ptycho-prepare-scans"></span><dl class="function">
<dt id="core.ptycho_prepare_scans">
<code class="descclassname">core.</code><code class="descname">ptycho_prepare_scans</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.ptycho_prepare_scans" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PTYCHO_PREPARE_SCANS Load data from disk and prepare the scan for the</div>
<div class="line">ptychographic reconstruction.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>p</strong> - p structure</li>
<li><strong>status</strong> - status flag</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-initialize-ptycho"><span class="std std-ref">core.initialize_ptycho</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-ptycho-recons"></span><dl class="function">
<dt id="core.ptycho_recons">
<code class="descclassname">core.</code><code class="descname">ptycho_recons</code><span class="sig-paren">(</span><em>p</em>, <em>prepare_only</em><span class="sig-paren">)</span><a class="headerlink" href="#core.ptycho_recons" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">OUT = PTYCHO_RECONS(P, PREPARE_ONLY = false)</div>
<div class="line">Runs the reconstruction using parameters in the structure p.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><em>optional</em></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prepare_only</strong> – stop after the data preparation; default: false</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">out                   updated p structure</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">out, status</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <span class="xref std std-ref">template_ptycho</span></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-remote-cleanup"></span><dl class="function">
<dt id="core.remote_cleanup">
<code class="descclassname">core.</code><code class="descname">remote_cleanup</code><span class="sig-paren">(</span><em>p</em>, <em>completed</em><span class="sig-paren">)</span><a class="headerlink" href="#core.remote_cleanup" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">REMOTE_CLEANUP</div>
<div class="line">remove temporary files on the remote machine and move the reconstruction</div>
<div class="line">to the save path on the primary machine</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>p</strong> – p structure</li>
<li><strong>completed</strong> – boolean; true if reconstruction finished properly</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>status</strong> - status flag</p>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-ptycho-recons"><span class="std std-ref">core.ptycho_recons</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-remote-status"></span><dl class="function">
<dt id="core.remote_status">
<code class="descclassname">core.</code><code class="descname">remote_status</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.remote_status" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">REMOTE_STATUS</div>
<div class="line">Check the current status of the remote reconstruction</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>p</strong> - updated p structure</li>
<li><strong>status</strong> - status flag</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-ptycho-recons"><span class="std std-ref">core.ptycho_recons</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-run-data-preparator"></span><dl class="function">
<dt id="core.run_data_preparator">
<code class="descclassname">core.</code><code class="descname">run_data_preparator</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.run_data_preparator" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">RUN_DATA_PREPARATOR</div>
<div class="line">prepare the function handle and call the data preparator</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>p</strong> - updated p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-ptycho-prepare-scans"><span class="std std-ref">core.ptycho_prepare_scans</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-run-engine"></span><dl class="function">
<dt id="core.run_engine">
<code class="descclassname">core.</code><code class="descname">run_engine</code><span class="sig-paren">(</span><em>p</em>, <em>eng</em><span class="sig-paren">)</span><a class="headerlink" href="#core.run_engine" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">RUN_ENGINE</div>
<div class="line">calls engine ‘eng’</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>p</strong> – p structure</li>
<li><strong>eng</strong> – name of the current engine</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>p</strong> - update p structure</li>
<li><strong>fdb</strong> - feedback structure of the engine</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-ptycho-recons"><span class="std std-ref">core.ptycho_recons</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-run-receiver"></span><dl class="function">
<dt id="core.run_receiver">
<code class="descclassname">core.</code><code class="descname">run_receiver</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.run_receiver" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">RUN_RECEIVER</div>
<div class="line">modify p structure and run ptycho_recons.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-setup-remote-recons"><span class="std std-ref">setup_remote_recons</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-save-fig-ext"></span><dl class="function">
<dt id="core.save_fig_ext">
<code class="descclassname">core.</code><code class="descname">save_fig_ext</code><span class="sig-paren">(</span><em>file</em><span class="sig-paren">)</span><a class="headerlink" href="#core.save_fig_ext" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">SAVE_FIG_EXT Subsection of ptycho_show_recons to load reconstruction file</div>
<div class="line">and save figures.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file</strong> – path+file of the reconstruction</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-save-results"><span class="std std-ref">core.save_results</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-save-results"></span><dl class="function">
<dt id="core.save_results">
<code class="descclassname">core.</code><code class="descname">save_results</code><span class="sig-paren">(</span><em>p</em>, <em>fdb</em>, <em>final</em><span class="sig-paren">)</span><a class="headerlink" href="#core.save_results" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">SAVE_RESULTS</div>
<div class="line">Save reconstruction and parameter file</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>p</strong> – p structure</li>
<li><strong>fdb</strong> – feedback structure</li>
<li><strong>final</strong> – boolean; false for intermediate saving routines</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>p</strong> - p structure</p>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-ptycho-recons"><span class="std std-ref">core.ptycho_recons</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-set-projections"></span><dl class="function">
<dt id="core.set_projections">
<code class="descclassname">core.</code><code class="descname">set_projections</code><span class="sig-paren">(</span><em>p</em>, <em>object</em>, <em>obj_update</em>, <em>scan_id</em><span class="sig-paren">)</span><a class="headerlink" href="#core.set_projections" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">SET_PROJETIONS</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>p</strong> – p structure</li>
<li><strong>object</strong> – full-size object</li>
<li><strong>obj_update</strong> – container for object projections</li>
<li><strong>scan_id</strong> – ID of the current scan</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>object</strong> - updated object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="core-fpm">
<h3>+core/+FPM<a class="headerlink" href="#core-fpm" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-core-fpm-fp-prealign"></span><dl class="function">
<dt id="core.FPM.FP_prealign">
<code class="descclassname">core.FPM.</code><code class="descname">FP_prealign</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.FPM.FP_prealign" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FP_PREALIGN prealign Fourier ptychographic data</div>
<div class="line">FP_prealign is an alignment routine for Fourier ptychographic</div>
<div class="line">measurements. Due to the changes in frequency content, a global</div>
<div class="line">registration is not sufficient. We therefore sort the frames such that</div>
<div class="line">images with similar frequency content can be aligned.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><em>taken from p.prealign:</em></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ctr_sh</strong> – shift the center before cropping the final dataset to asize</li>
<li><strong>crop_dft</strong> – crop the images by crop_dft before calculating the dftregistration</li>
<li><strong>axis</strong> – start the alignment procedure along specified axis or rotation (1 or 2)</li>
<li><strong>numiter</strong> – number of iterations</li>
<li><strong>rad_filt_min</strong> – discard positions below rad_filt_min</li>
<li><strong>rad_filt_max</strong> – discard positions beyond rad_filt_max</li>
<li><strong>mfiles</strong> – discard specific data points</li>
<li><strong>flat_corr</strong> – apply a flat-field correction</li>
<li><strong>filt_align</strong> – remove interpolation artifacts</li>
<li><strong>save_alignment</strong> – save final shifts / alignment</li>
<li><strong>load_alignment</strong> – overwrite alignment with previous alignment</li>
<li><strong>alignment_file</strong> – specify path+file</li>
<li><strong>plot</strong> – alignment     turn on/off plotting during the alignment</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>p</strong> - p structure</p>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="base_func_doc.html#base-utils-dftregistration"><span class="std std-ref">utils.dftregistration</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-fpm-align-data"></span><dl class="function">
<dt id="core.FPM.align_data">
<code class="descclassname">core.FPM.</code><code class="descname">align_data</code><span class="sig-paren">(</span><em>par</em>, <em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#core.FPM.align_data" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">ALIGN_DATA align data along given path</div>
<div class="line">align_data is a helper function of FP_prealign</div>
<div class="line">It uses utils.dftregistration to achieve a subpixel alignment</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>par</strong> – FP_prealign structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>par</strong> - updated FP_prealign structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-fpm-fp-prealign"><span class="std std-ref">core.FPM.FP_prealign</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-fpm-sort-pos"></span><dl class="function">
<dt id="core.FPM.sort_pos">
<code class="descclassname">core.FPM.</code><code class="descname">sort_pos</code><span class="sig-paren">(</span><em>par</em>, <em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#core.FPM.sort_pos" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">SORT_POS sort positions</div>
<div class="line">sort_pos is a helper function of FP_prealign</div>
<div class="line">it minimizes the path length, similar to the travelling salesman problem,</div>
<div class="line">albeit optimized for the peculiarities of a Fourier ptychographic scan</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>par</strong> – FP_prealign structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><em>optional</em></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sort_type</strong> – ‘raster’, ‘round’ or ‘raster_lim’</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>par</strong> - updated FP_prealign structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-fpm-fp-prealign"><span class="std std-ref">core.FPM.FP_prealign</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-fpm-sort-pos-radii"></span><dl class="function">
<dt id="core.FPM.sort_pos_radii">
<code class="descclassname">core.FPM.</code><code class="descname">sort_pos_radii</code><span class="sig-paren">(</span><em>par</em>, <em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#core.FPM.sort_pos_radii" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">SORT_POS_RADII sort positions along their radial distance</div>
<div class="line">sort_pos_radii is a helper function of FP_prealign</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>par</strong> – final structure of FP_prealign</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>par</strong> - updated FP_prealign structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-fpm-fp-prealign"><span class="std std-ref">core.FPM.FP_prealign</span></a></div>
</div>
</dd></dl>

</div>
<div class="section" id="core-private">
<h3>+core/private<a class="headerlink" href="#core-private" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-core-load-defaults"></span><dl class="function">
<dt id="core.load_defaults">
<code class="descclassname">core.</code><code class="descname">load_defaults</code><span class="sig-paren">(</span><em>file</em><span class="sig-paren">)</span><a class="headerlink" href="#core.load_defaults" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">LOAD_DEFAULTS load default p structure from file</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-core-plot-raw-data"></span><dl class="function">
<dt id="core.plot_raw_data">
<code class="descclassname">core.</code><code class="descname">plot_raw_data</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.plot_raw_data" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PLOT_RAW_DATA Simple plotting routine for masked raw data</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-initialize-ptycho"><span class="std std-ref">core.initialize_ptycho</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-ptycho-exit"></span><dl class="function">
<dt id="core.ptycho_exit">
<code class="descclassname">core.</code><code class="descname">ptycho_exit</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.ptycho_exit" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PTYCHO_EXIT</div>
<div class="line">onCleanup function for core.ptycho_recons</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-ptycho-recons"><span class="std std-ref">core.ptycho_recons</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-core-write-procid"></span><dl class="function">
<dt id="core.write_procID">
<code class="descclassname">core.</code><code class="descname">write_procID</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#core.write_procID" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">WRITE_PROCID</div>
<div class="line">writes .dat files to utils/.tmp_procID to keep track of current</div>
<div class="line">reconstructions</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="detector">
<h2>+detector<a class="headerlink" href="#detector" title="Permalink to this headline">¶</a></h2>
<dl class="object">
<dt>
<code class="descname">detStorage</code></dt>
<dd><div class="line-block">
<div class="line">DETSTORAGE Matlab class for convenient data access during the data</div>
<div class="line">preparation</div>
<div class="line">Reference page in Doc Center</div>
<div class="line">doc detector.detStorage</div>
</div>
</dd></dl>

<span class="target" id="ptycho-detector-initialize-detector"></span><dl class="function">
<dt id="detector.initialize_detector">
<code class="descclassname">detector.</code><code class="descname">initialize_detector</code><span class="sig-paren">(</span><em>p</em>, <em>ii</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.initialize_detector" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">INITIALIZE_DETECTOR run some checks and load the detector settings</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-detector-load-detector"></span><dl class="function">
<dt id="detector.load_detector">
<code class="descclassname">detector.</code><code class="descname">load_detector</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.load_detector" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">LOAD_DETECTOR</div>
<div class="line">load detector files as specified in p</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="detector-eiger">
<h3>+detector/+eiger<a class="headerlink" href="#detector-eiger" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-detector-eiger-eiger"></span><dl class="function">
<dt id="detector.eiger.eiger">
<code class="descclassname">detector.eiger.</code><code class="descname">eiger</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.eiger.eiger" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">EIGER settings for Eiger detector</div>
<div class="line">This file is called if you specify p.detector = ‘eiger’.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>det</strong> - detector structure; later accessible via p.detectors(ii).params</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-load-detector"><span class="std std-ref">detector.load_detector</span></a></div>
</div>
</dd></dl>

</div>
<div class="section" id="detector-eiger1p5m">
<h3>+detector/+eiger1p5M<a class="headerlink" href="#detector-eiger1p5m" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-detector-eiger1p5m-convert"></span><dl class="function">
<dt id="detector.eiger1p5M.convert">
<code class="descclassname">detector.eiger1p5M.</code><code class="descname">convert</code><span class="sig-paren">(</span><em>scan</em>, <em>raw_data_path</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.eiger1p5M.convert" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">function convert(scan, raw_data_path)</div>
<div class="line">convert .raw files to .cbf</div>
</div>
</dd></dl>

<span class="target" id="ptycho-detector-eiger1p5m-convert2hdf5"></span><dl class="function">
<dt id="detector.eiger1p5M.convert2hdf5">
<code class="descclassname">detector.eiger1p5M.</code><code class="descname">convert2hdf5</code><span class="sig-paren">(</span><em>scan</em>, <em>raw_data_path</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.eiger1p5M.convert2hdf5" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">function convert(scan, raw_data_path)</div>
<div class="line">convert .raw files to .hdf5</div>
<div class="line">Inputs</div>
<div class="line">scan              scan number</div>
<div class="line">raw_data_path     path to the raw data (optional)</div>
</div>
</dd></dl>

<span class="target" id="ptycho-detector-eiger1p5m-eiger1p5m"></span><dl class="function">
<dt id="detector.eiger1p5M.eiger1p5M">
<code class="descclassname">detector.eiger1p5M.</code><code class="descname">eiger1p5M</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.eiger1p5M.eiger1p5M" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">EIGER1P5M settings for Eiger 1.5M detector</div>
<div class="line">This file is called if you specify p.detector = ‘eiger1p5M’</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>det</strong> - detector structure; later accessible via p.detectors(ii).params</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-load-detector"><span class="std std-ref">detector.load_detector</span></a></div>
</div>
</dd></dl>

</div>
<div class="section" id="detector-eiger4m-swing">
<h3>+detector/+eiger4M_swing<a class="headerlink" href="#detector-eiger4m-swing" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-detector-eiger4m-swing-eiger4m-swing"></span><dl class="function">
<dt id="detector.eiger4M_swing.eiger4M_swing">
<code class="descclassname">detector.eiger4M_swing.</code><code class="descname">eiger4M_swing</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.eiger4M_swing.eiger4M_swing" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">EIGER settings for Eiger detector at the SWING beamline (Soleil)</div>
<div class="line">This file is called if you specify p.detector = ‘eiger4M_swing’.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>det</strong> - detector structure; later accessible via p.detectors(ii).params</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-load-detector"><span class="std std-ref">detector.load_detector</span></a></div>
</div>
</dd></dl>

</div>
<div class="section" id="detector-eiger9m">
<h3>+detector/+eiger9M<a class="headerlink" href="#detector-eiger9m" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-detector-eiger9m-eiger9m"></span><dl class="function">
<dt id="detector.eiger9M.eiger9M">
<code class="descclassname">detector.eiger9M.</code><code class="descname">eiger9M</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.eiger9M.eiger9M" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PILATUS settings for Pilatus detector</div>
<div class="line">This file is called if you specify p.detector = ‘pilatus’</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>det</strong> - detector structure; later accessible via p.detectors(ii).params</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-load-detector"><span class="std std-ref">detector.load_detector</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-detector-eiger9m-get-dir-path"></span><dl class="function">
<dt id="detector.eiger9M.get_dir_path">
<code class="descclassname">detector.eiger9M.</code><code class="descname">get_dir_path</code><span class="sig-paren">(</span><em>p</em>, <em>ii</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.eiger9M.get_dir_path" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">GET_DIR_PATH define directory structure.</div>
<div class="line">default scheme for data (scan 68) taken at cSAXS: S00000-00999/S00068/</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">data_path</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="detector-moench">
<h3>+detector/+moench<a class="headerlink" href="#detector-moench" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-detector-moench-moench"></span><dl class="function">
<dt id="detector.moench.moench">
<code class="descclassname">detector.moench.</code><code class="descname">moench</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.moench.moench" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">MOENCH settings for Moench detector</div>
<div class="line">This file is called if you specify p.detector = ‘moench’.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>det</strong> - detector structure; later accessible via p.detectors(ii).params</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-load-detector"><span class="std std-ref">detector.load_detector</span></a></div>
</div>
</dd></dl>

</div>
<div class="section" id="detector-oldeiger">
<h3>+detector/+oldeiger<a class="headerlink" href="#detector-oldeiger" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-detector-oldeiger-oldeiger"></span><dl class="function">
<dt id="detector.oldeiger.oldeiger">
<code class="descclassname">detector.oldeiger.</code><code class="descname">oldeiger</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.oldeiger.oldeiger" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">EIGER settings for Eiger detector</div>
<div class="line">This file is called if you specify p.detector = ‘eiger’.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>det</strong> - detector structure; later accessible via p.detectors(ii).params</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-load-detector"><span class="std std-ref">detector.load_detector</span></a></div>
</div>
</dd></dl>

</div>
<div class="section" id="detector-pco-nano">
<h3>+detector/+pco_nano<a class="headerlink" href="#detector-pco-nano" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-detector-pco-nano-pco-nano"></span><dl class="function">
<dt id="detector.pco_nano.pco_nano">
<code class="descclassname">detector.pco_nano.</code><code class="descname">pco_nano</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.pco_nano.pco_nano" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PCO_NANO settings for PCO Edge Nano detector</div>
<div class="line">This file is called if you specify p.detector = ‘pco_nano’.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">det</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="detector-pilatus">
<h3>+detector/+pilatus<a class="headerlink" href="#detector-pilatus" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-detector-pilatus-pilatus"></span><dl class="function">
<dt id="detector.pilatus.pilatus">
<code class="descclassname">detector.pilatus.</code><code class="descname">pilatus</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.pilatus.pilatus" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PILATUS settings for Pilatus detector</div>
<div class="line">This file is called if you specify p.detector = ‘pilatus’</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>det</strong> - detector structure; later accessible via p.detectors(ii).params</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-load-detector"><span class="std std-ref">detector.load_detector</span></a></div>
</div>
</dd></dl>

</div>
<div class="section" id="detector-prep-data">
<h3>+detector/+prep_data<a class="headerlink" href="#detector-prep-data" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-detector-prep-data-get-dir-path"></span><dl class="function">
<dt id="detector.prep_data.get_dir_path">
<code class="descclassname">detector.prep_data.</code><code class="descname">get_dir_path</code><span class="sig-paren">(</span><em>p</em>, <em>ii</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.get_dir_path" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">GET_DIR_PATH define directory structure.</div>
<div class="line">default scheme for data (scan 68) taken at cSAXS: S00000-00999/S00068/</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">data_path</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-detector-prep-data-update-defaults"></span><dl class="function">
<dt id="detector.prep_data.update_defaults">
<code class="descclassname">detector.prep_data.</code><code class="descname">update_defaults</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.update_defaults" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">UPDATE_DEFAULTS update parameters with default values that are crucial for</div>
<div class="line">a further processing of the data and look for overloaded functions</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-detector-prep-data-update-funcs"></span><dl class="function">
<dt id="detector.prep_data.update_funcs">
<code class="descclassname">detector.prep_data.</code><code class="descname">update_funcs</code><span class="sig-paren">(</span><em>p</em>, <em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.update_funcs" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">UPDATE_FUNCS Update prepare data functions with overloaded functions from</div>
<div class="line">the detector directory</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="detector-prep-data-libdetxr">
<h3>+detector/+prep_data/+libDetXR<a class="headerlink" href="#detector-prep-data-libdetxr" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-detector-prep-data-libdetxr-libdetxr"></span><dl class="function">
<dt id="detector.prep_data.libDetXR.libDetXR">
<code class="descclassname">detector.prep_data.libDetXR.</code><code class="descname">libDetXR</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.libDetXR.libDetXR" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">libDetXR prepares and exports data for libDetXR/ptyhon data</div>
<div class="line">preparation.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>p</strong> - updated p structure</li>
<li><strong>fdb</strong> - feedback structure</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-core-run-data-preparator"><span class="std std-ref">core.run_data_preparator</span></a></div>
</div>
</dd></dl>

</div>
<div class="section" id="detector-prep-data-matlab-ps">
<h3>+detector/+prep_data/+matlab_ps<a class="headerlink" href="#detector-prep-data-matlab-ps" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-detector-prep-data-matlab-ps-check-burst"></span><dl class="function">
<dt id="detector.prep_data.matlab_ps.check_burst">
<code class="descclassname">detector.prep_data.matlab_ps.</code><code class="descname">check_burst</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.matlab_ps.check_burst" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">CHECK_BURST check first file for burst scan</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-detector-prep-data-matlab-ps-get-center"></span><dl class="function">
<dt id="detector.prep_data.matlab_ps.get_center">
<code class="descclassname">detector.prep_data.matlab_ps.</code><code class="descname">get_center</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.matlab_ps.get_center" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">GET_CENTER Estimate the center of the diffraction pattern</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-detector-prep-data-matlab-ps-get-mask"></span><dl class="function">
<dt id="detector.prep_data.matlab_ps.get_mask">
<code class="descclassname">detector.prep_data.matlab_ps.</code><code class="descname">get_mask</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.matlab_ps.get_mask" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">GET_MASK Mask saturated values as defined in the detector template</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>p</strong> - p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-prep-data-matlab-ps-prepare-data"><span class="std std-ref">detector.prep_data.matlab_ps.prepare_data</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-detector-prep-data-matlab-ps-load-data"></span><dl class="function">
<dt id="detector.prep_data.matlab_ps.load_data">
<code class="descclassname">detector.prep_data.matlab_ps.</code><code class="descname">load_data</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.matlab_ps.load_data" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">LOAD_DATA prepare filenames and load data</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>p</strong> - p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-prep-data-matlab-ps-prepare-data"><span class="std std-ref">detector.prep_data.matlab_ps.prepare_data</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-detector-prep-data-matlab-ps-mask-geometry"></span><dl class="function">
<dt id="detector.prep_data.matlab_ps.mask_geometry">
<code class="descclassname">detector.prep_data.matlab_ps.</code><code class="descname">mask_geometry</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.matlab_ps.mask_geometry" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">MASK_GEOMETRY crop mask to fit defined readout geometries</div>
<div class="line">if no geometry is specified, the full mask is used</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>p</strong> - p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-prep-data-matlab-ps-prepare-data"><span class="std std-ref">detector.prep_data.matlab_ps.prepare_data</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-detector-prep-data-matlab-ps-matlab-ps"></span><dl class="function">
<dt id="detector.prep_data.matlab_ps.matlab_ps">
<code class="descclassname">detector.prep_data.matlab_ps.</code><code class="descname">matlab_ps</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.matlab_ps.matlab_ps" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">MATLAB_PS - Matlab data preparator</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-detector-prep-data-matlab-ps-postprocess"></span><dl class="function">
<dt id="detector.prep_data.matlab_ps.postprocess">
<code class="descclassname">detector.prep_data.matlab_ps.</code><code class="descname">postprocess</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.matlab_ps.postprocess" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">POSTPROCESS postprocess functions</div>
<div class="line">applied to the 4D raw data</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>p</strong> - updated p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-prep-data-matlab-ps-matlab-ps"><span class="std std-ref">detector.prep_data.matlab_ps.matlab_ps</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-detector-prep-data-matlab-ps-prep-data-matlab"></span><dl class="function">
<dt id="detector.prep_data.matlab_ps.prep_data_matlab">
<code class="descclassname">detector.prep_data.matlab_ps.</code><code class="descname">prep_data_matlab</code><span class="sig-paren">(</span><em>p</em>, <em>data</em>, <em>fmask</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.matlab_ps.prep_data_matlab" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PREPARE_DATA_MATLAB prepares and normalizes data for matlab engines</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-detector-prep-data-matlab-ps-prepare-data"></span><dl class="function">
<dt id="detector.prep_data.matlab_ps.prepare_data">
<code class="descclassname">detector.prep_data.matlab_ps.</code><code class="descname">prepare_data</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.matlab_ps.prepare_data" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PREPARE_DATA prepare the raw data for the ptychographic reconstruction</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><em>Note:</em></div>
<div class="line">All (default) functions are located in +detector/+prep_data/+matlab_ps. If You want</div>
<div class="line">to add a new detector, please create a new package directory</div>
<div class="line">(+detector_name) with a parameter file detector_name.m. Functions in a</div>
<div class="line">package detectory directory will overload similar functions in the default directory.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>p</strong> - p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-prep-data-matlab-ps-matlab-ps"><span class="std std-ref">detector.prep_data.matlab_ps.matlab_ps</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-detector-prep-data-matlab-ps-preprocess"></span><dl class="function">
<dt id="detector.prep_data.matlab_ps.preprocess">
<code class="descclassname">detector.prep_data.matlab_ps.</code><code class="descname">preprocess</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.prep_data.matlab_ps.preprocess" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PREPROCESS preprocess functions</div>
<div class="line">e.g. select area before reading from disk</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>p</strong> - p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-prep-data-matlab-ps-prepare-data"><span class="std std-ref">detector.prep_data.matlab_ps.prepare_data</span></a></div>
</div>
</dd></dl>

</div>
<div class="section" id="detector-virtual">
<h3>+detector/+virtual<a class="headerlink" href="#detector-virtual" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-detector-virtual-get-center"></span><dl class="function">
<dt id="detector.virtual.get_center">
<code class="descclassname">detector.virtual.</code><code class="descname">get_center</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.virtual.get_center" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">GET_CENTER Estimate the center of the diffraction pattern</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-detector-virtual-load-data"></span><dl class="function">
<dt id="detector.virtual.load_data">
<code class="descclassname">detector.virtual.</code><code class="descname">load_data</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.virtual.load_data" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">LOAD_DATA prepare filenames and load data</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-detector-virtual-preprocess"></span><dl class="function">
<dt id="detector.virtual.preprocess">
<code class="descclassname">detector.virtual.</code><code class="descname">preprocess</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.virtual.preprocess" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Academic License Agreement</div>
</div>
<div class="line-block">
<div class="line">Source Code</div>
</div>
<div class="line-block">
<div class="line">Introduction</div>
<div class="line">•    This license agreement sets forth the terms and conditions under which the PAUL SCHERRER INSTITUT (PSI), CH-5232 Villigen-PSI, Switzerland (hereafter “LICENSOR”)</div>
<div class="line">will grant you (hereafter “LICENSEE”) a royalty-free, non-exclusive license for academic, non-commercial purposes only (hereafter “LICENSE”) to use the cSAXS</div>
<div class="line">ptychography MATLAB package computer software program and associated documentation furnished hereunder (hereafter “PROGRAM”).</div>
</div>
<div class="line-block">
<div class="line">Terms and Conditions of the LICENSE</div>
<div class="line">1.   LICENSOR grants to LICENSEE a royalty-free, non-exclusive license to use the PROGRAM for academic, non-commercial purposes, upon the terms and conditions</div>
<div class="line">hereinafter set out and until termination of this license as set forth below.</div>
<div class="line">2.   LICENSEE acknowledges that the PROGRAM is a research tool still in the development stage. The PROGRAM is provided without any related services, improvements</div>
<div class="line">or warranties from LICENSOR and that the LICENSE is entered into in order to enable others to utilize the PROGRAM in their academic activities. It is the</div>
<div class="line">LICENSEE’s responsibility to ensure its proper use and the correctness of the results.”</div>
<div class="line">3.   THE PROGRAM IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR</div>
<div class="line">A PARTICULAR PURPOSE AND NONINFRINGEMENT OF ANY PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS. IN NO EVENT SHALL THE LICENSOR, THE AUTHORS OR THE COPYRIGHT</div>
<div class="line">HOLDERS BE LIABLE FOR ANY CLAIM, DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES OR OTHER LIABILITY ARISING FROM, OUT OF OR IN CONNECTION WITH THE PROGRAM OR THE USE</div>
<div class="line">OF THE PROGRAM OR OTHER DEALINGS IN THE PROGRAM.</div>
<div class="line">4.   LICENSEE agrees that it will use the PROGRAM and any modifications, improvements, or derivatives of PROGRAM that LICENSEE may create (collectively,</div>
<div class="line">“IMPROVEMENTS”) solely for academic, non-commercial purposes and that any copy of PROGRAM or derivatives thereof shall be distributed only under the same</div>
<div class="line">license as PROGRAM. The terms “academic, non-commercial”, as used in this Agreement, mean academic or other scholarly research which (a) is not undertaken for</div>
<div class="line">profit, or (b) is not intended to produce works, services, or data for commercial use, or (c) is neither conducted, nor funded, by a person or an entity engaged</div>
<div class="line">in the commercial use, application or exploitation of works similar to the PROGRAM.</div>
<div class="line">5.   LICENSEE agrees that it shall make the following acknowledgement in any publication resulting from the use of the PROGRAM or any translation of the code into</div>
<div class="line">another computing language:</div>
<div class="line">“Data processing was carried out using the cSAXS ptychography MATLAB package developed by the Science IT and the coherent X-ray scattering (CXS) groups, Paul</div>
<div class="line">Scherrer Institut, Switzerland.”</div>
</div>
<div class="line-block">
<div class="line">Additionally, any publication using the package, or any translation of the code into another computing language should cite for difference map:</div>
<div class="line">P. Thibault, M. Dierolf, A. Menzel, O. Bunk, C. David, F. Pfeiffer, High-resolution scanning X-ray diffraction microscopy, Science 321, 379–382 (2008).</div>
<div class="line">(doi: 10.1126/science.1158573),</div>
<div class="line">for maximum likelihood:</div>
<div class="line">P. Thibault and M. Guizar-Sicairos, Maximum-likelihood refinement for coherent diffractive imaging, New J. Phys. 14, 063004 (2012).</div>
<div class="line">(doi: 10.1088/1367-2630/14/6/063004),</div>
<div class="line">for mixed coherent modes:</div>
<div class="line">P. Thibault and A. Menzel, Reconstructing state mixtures from diffraction measurements, Nature 494, 68–71 (2013). (doi: 10.1038/nature11806),</div>
<div class="line">and/or for multislice:</div>
<div class="line">E. H. R. Tsai, I. Usov, A. Diaz, A. Menzel, and M. Guizar-Sicairos, X-ray ptychography with extended depth of field, Opt. Express 24, 29089–29108 (2016).</div>
<div class="line">(doi: 10.1364/OE.24.029089).</div>
<div class="line">6.   Except for the above-mentioned acknowledgment, LICENSEE shall not use the PROGRAM title or the names or logos of LICENSOR, nor any adaptation thereof, nor the</div>
<div class="line">names of any of its employees or laboratories, in any advertising, promotional or sales material without prior written consent obtained from LICENSOR in each case.</div>
<div class="line">7.   Ownership of all rights, including copyright in the PROGRAM and in any material associated therewith, shall at all times remain with LICENSOR, and LICENSEE</div>
<div class="line">agrees to preserve same. LICENSEE agrees not to use any portion of the PROGRAM or of any IMPROVEMENTS in any machine-readable form outside the PROGRAM, nor to</div>
<div class="line">make any copies except for its internal use, without prior written consent of LICENSOR. LICENSEE agrees to place the following copyright notice on any such copies:</div>
<div class="line">© All rights reserved. PAUL SCHERRER INSTITUT, Switzerland, Laboratory for Macromolecules and Bioimaging, 2017.</div>
<div class="line">8.   The LICENSE shall not be construed to confer any rights upon LICENSEE by implication or otherwise except as specifically set forth herein.</div>
<div class="line">9.   DISCLAIMER: LICENSEE shall be aware that Phase Focus Limited of Sheffield, UK has an international portfolio of patents and pending applications which relate</div>
<div class="line">to ptychography and that the PROGRAM may be capable of being used in circumstances which may fall within the claims of one or more of the Phase Focus patents,</div>
<div class="line">in particular of patent with international application number PCT/GB2005/001464. The LICENSOR explicitly declares not to indemnify the users of the software</div>
<div class="line">in case Phase Focus or any other third party will open a legal action against the LICENSEE due to the use of the program.</div>
<div class="line">10.  This Agreement shall be governed by the material laws of Switzerland and any dispute arising out of this Agreement or use of the PROGRAM shall be brought before</div>
<div class="line">the courts of Zürich, Switzerland.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-detector-virtual-virtual"></span><dl class="function">
<dt id="detector.virtual.virtual">
<code class="descclassname">detector.virtual.</code><code class="descname">virtual</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.virtual.virtual" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Settings of a virtual detector that creates artificial data</div>
<div class="line">This file is called if you specify p.detector = ‘virtual’.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">det</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="detector-virtual-private">
<h3>+detector/+virtual/private<a class="headerlink" href="#detector-virtual-private" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-detector-virtual-create-object"></span><dl class="function">
<dt id="detector.virtual.create_object">
<code class="descclassname">detector.virtual.</code><code class="descname">create_object</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.virtual.create_object" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">CREATE_OBJECT create object for artificial scans</div>
<div class="line">select object with sim.simulation.dataset in your simulation template</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">obj</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-detector-virtual-fourier-ptycho-data"></span><dl class="function">
<dt id="detector.virtual.fourier_ptycho_data">
<code class="descclassname">detector.virtual.</code><code class="descname">fourier_ptycho_data</code><span class="sig-paren">(</span><em>sim</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.virtual.fourier_ptycho_data" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FOURIER_PTYCHO_DATA</div>
<div class="line">Prepare and adjust artificial data for Fourier Ptychography</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">sim</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-detector-virtual-randpoisson"></span><dl class="function">
<dt id="detector.virtual.randpoisson">
<code class="descclassname">detector.virtual.</code><code class="descname">randpoisson</code><span class="sig-paren">(</span><em>ltthresh</em><span class="sig-paren">)</span><a class="headerlink" href="#detector.virtual.randpoisson" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">function out=randpoisson(inarray,thresh);</div>
<div class="line">outputs an array of poisson-distributed numbers with mean equal to inarray</div>
<div class="line">For inarray values above the threshold thresh (default=32),</div>
<div class="line">use a quick-and-dirty version of the gaussian method,</div>
<div class="line">but with negatives clipped to zero</div>
<div class="line">J.R. Fienup 10/22/99</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">does this k index over</td>
</tr>
</tbody>
</table>
<p>r(ind)</p>
</dd></dl>

</div>
</div>
<div class="section" id="engines">
<h2>+engines<a class="headerlink" href="#engines" title="Permalink to this headline">¶</a></h2>
<span class="target" id="ptycho-engines-dm"></span><dl class="function">
<dt id="engines.DM">
<code class="descclassname">engines.</code><code class="descname">DM</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.DM" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">DM Difference-Map algorithm</div>
</div>
<div class="line-block">
<div class="line">Publications most relevant to the Difference-Map implementation</div>
<div class="line">+ P. Thibault, M. Dierolf, A. Menzel, O. Bunk, C. David, F. Pfeiffer,</div>
<div class="line">“High-Resolution Scanning X-ray Diffraction Microscopy,” Science 321, 379-382 (2008)</div>
<div class="line">+ P. Thibault, M. Dierolf, O. Bunk, A. Menzel, F. Pfeiffer,</div>
<div class="line">“Probe retrieval in ptychographic coherent diffractive imaging,”</div>
<div class="line">Ultramicroscopy 109, 338–343 (2009)</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p, fdb</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-dm-ms"></span><dl class="function">
<dt id="engines.DM_MS">
<code class="descclassname">engines.</code><code class="descname">DM_MS</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.DM_MS" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">[ p, fdb ] = DM_MS( p )</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p, fdb</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu"></span><dl class="function">
<dt id="engines.GPU">
<code class="descclassname">engines.</code><code class="descname">GPU</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">engines.GPU is a function.</div>
<div class="line">[p_out, fdb] = GPU(p)</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p_out, fdb</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-ml"></span><dl class="function">
<dt id="engines.ML">
<code class="descclassname">engines.</code><code class="descname">ML</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.ML" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">ML Maximum Likelihood refinement</div>
</div>
<div class="line-block">
<div class="line">Publications most relevant to the Maximum Likelihood refinement</div>
<div class="line">+ M. Guizar-Sicairos and J. R. Fienup, “Phase retrieval with transverse</div>
<div class="line">translation diversity: a nonlinear optimization approach,” Opt. Express 16, 7264-7278 (2008)</div>
<div class="line">+ P. Thibault and M. Guizar-Sicairos, “Maximum-likelihood refinement for</div>
<div class="line">coherent diffractive imaging,” New J. Phys. 14, 063004 (2012).</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p, fdb</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-ml-ms"></span><dl class="function">
<dt id="engines.ML_MS">
<code class="descclassname">engines.</code><code class="descname">ML_MS</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.ML_MS" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">[ p, fdb ] = ML_MS( p )</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p, fdb</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-ml-ms-rot"></span><dl class="function">
<dt id="engines.ML_MS_rot">
<code class="descclassname">engines.</code><code class="descname">ML_MS_rot</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.ML_MS_rot" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">UNTITLED7 Summary of this function goes here</div>
<div class="line">Detailed explanation goes here</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p, fdb</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-c-solver"></span><dl class="function">
<dt id="engines.c_solver">
<code class="descclassname">engines.</code><code class="descname">c_solver</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.c_solver" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">C_SOLVER external C++ code for DM and ML</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">Publications most relevant to the Difference-Map implementation</div>
<div class="line">+ P. Thibault, M. Dierolf, A. Menzel, O. Bunk, C. David, F. Pfeiffer,</div>
<div class="line">“High-Resolution Scanning X-ray Diffraction Microscopy,” Science 321, 379-382 (2008)</div>
<div class="line">+ P. Thibault, M. Dierolf, O. Bunk, A. Menzel, F. Pfeiffer,</div>
<div class="line">“Probe retrieval in ptychographic coherent diffractive imaging,”</div>
<div class="line">Ultramicroscopy 109, 338–343 (2009)</div>
</div>
<div class="line-block">
<div class="line">Publications most relevant to the Maximum Likelihood refinement</div>
<div class="line">+ M. Guizar-Sicairos and J. R. Fienup, “Phase retrieval with transverse</div>
<div class="line">translation diversity: a nonlinear optimization approach,” Opt. Express 16, 7264-7278 (2008)</div>
<div class="line">+ P. Thibault and M. Guizar-Sicairos, “Maximum-likelihood refinement for</div>
<div class="line">coherent diffractive imaging,” New J. Phys. 14, 063004 (2012).</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>p</strong> - p structure</li>
<li><strong>fdb</strong> - feedback structure</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-detector-prep-data-matlab-ps-prepare-data"><span class="std std-ref">detector.prep_data.matlab_ps.prepare_data</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-engines-presolver"></span><dl class="function">
<dt id="engines.presolver">
<code class="descclassname">engines.</code><code class="descname">presolver</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.presolver" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">C_SOLVER external C++ code for DM in lower resolution</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p, fdb</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="engines-dm">
<h3>+engines/+DM<a class="headerlink" href="#engines-dm" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="engines-gpu">
<h3>+engines/+GPU<a class="headerlink" href="#engines-gpu" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-engines-gpu-gpu-dm"></span><dl class="function">
<dt id="engines.GPU.GPU_DM">
<code class="descclassname">engines.GPU.</code><code class="descname">GPU_DM</code><span class="sig-paren">(</span><em>self</em>, <em>par</em>, <em>cache</em>, <em>psi_dash</em>, <em>fourier_error</em>, <em>mode_id</em>, <em>iter</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.GPU_DM" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">engines.GPU.GPU_DM is a function.</div>
<div class="line">[self, cache, psi_dash, fourier_error] = GPU_DM(self, par, cache, psi_dash, fourier_error, mode_id, iter)</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self, cache, psi_dash, fourier_error</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-gpu-lsqml"></span><dl class="function">
<dt id="engines.GPU.GPU_LSQML">
<code class="descclassname">engines.GPU.</code><code class="descname">GPU_LSQML</code><span class="sig-paren">(</span><em>self</em>, <em>par</em>, <em>cache</em>, <em>fourier_error</em>, <em>mode_id</em>, <em>iter</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.GPU_LSQML" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">engines.GPU.GPU_LSQML is a function.</div>
<div class="line">[self, cache, fourier_error] = GPU_LSQML(self, par, cache, fourier_error, mode_id, iter)</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self, cache, fourier_error</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-gpu-pie"></span><dl class="function">
<dt id="engines.GPU.GPU_PIE">
<code class="descclassname">engines.GPU.</code><code class="descname">GPU_PIE</code><span class="sig-paren">(</span><em>self</em>, <em>par</em>, <em>cache</em>, <em>fourier_error</em>, <em>mode_id</em>, <em>iter</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.GPU_PIE" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">engines.GPU.GPU_PIE is a function.</div>
<div class="line">[self, cache, fourier_error] = GPU_PIE(self, par, cache, fourier_error, mode_id, iter)</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self, cache, fourier_error</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-garray"></span><dl class="function">
<dt id="engines.GPU.Garray">
<code class="descclassname">engines.GPU.</code><code class="descname">Garray</code><span class="sig-paren">(</span><em>array</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.Garray" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">wrap the GPU functions for user so that CPU and GPU code is identical</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">array</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-gfun"></span><dl class="function">
<dt id="engines.GPU.Gfun">
<code class="descclassname">engines.GPU.</code><code class="descname">Gfun</code><span class="sig-paren">(</span><em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.Gfun" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Description: wrap the arrayfun function so that CPU and GPU code is identical</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">varargout</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-ggather"></span><dl class="function">
<dt id="engines.GPU.Ggather">
<code class="descclassname">engines.GPU.</code><code class="descname">Ggather</code><span class="sig-paren">(</span><em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.Ggather" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Description: wrap the GPU functions for user so that CPU and GPU code is identical</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">varargout</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-gpagefun"></span><dl class="function">
<dt id="engines.GPU.Gpagefun">
<code class="descclassname">engines.GPU.</code><code class="descname">Gpagefun</code><span class="sig-paren">(</span><em>fun</em>, <em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.Gpagefun" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">wrapper around GPU pagefun function</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">out</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-gzeros"></span><dl class="function">
<dt id="engines.GPU.Gzeros">
<code class="descclassname">engines.GPU.</code><code class="descname">Gzeros</code><span class="sig-paren">(</span><em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.Gzeros" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Description: wrap the GPU functions for user so that CPU and GPU code is identical</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">out</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-add-momentum-object"></span><dl class="function">
<dt id="engines.GPU.add_momentum_object">
<code class="descclassname">engines.GPU.</code><code class="descname">add_momentum_object</code><span class="sig-paren">(</span><em>self</em>, <em>cache</em>, <em>par</em>, <em>object_upd_sum</em>, <em>iter</em>, <em>fourier_error</em>, <em>beta_object</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.add_momentum_object" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [self, cache] = add_momentum_object(self, cache, par, object_upd_sum, iter, fourier_error)</div>
<div class="line">speed up convergence by adding momentum / integral term into the</div>
<div class="line">update direction for the MLc method</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self, cache</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-add-momentum-probe"></span><dl class="function">
<dt id="engines.GPU.add_momentum_probe">
<code class="descclassname">engines.GPU.</code><code class="descname">add_momentum_probe</code><span class="sig-paren">(</span><em>self</em>, <em>cache</em>, <em>par</em>, <em>probe_upd</em>, <em>iter</em>, <em>fourier_error</em>, <em>beta_probe</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.add_momentum_probe" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [self, cache] = add_momentum_probe(self, cache, par, probe_upd, iter, fourier_error)</div>
<div class="line">speed up convergence by adding momentum / integral term into the</div>
<div class="line">update direction for the MLc method</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self, cache</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-apply-svd-filter"></span><dl class="function">
<dt id="engines.GPU.apply_SVD_filter">
<code class="descclassname">engines.GPU.</code><code class="descname">apply_SVD_filter</code><span class="sig-paren">(</span><em>probe</em>, <em>Nmodes</em>, <em>mode</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.apply_SVD_filter" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">the variable probe (OPRP) code</div>
<div class="line">find SVD decomposition and limit the probe into several orthogonal</div>
<div class="line">modes</div>
<div class="line">additional prior knowledge can be also included</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">probe, probe_evolution</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-apply-probe-contraints"></span><dl class="function">
<dt id="engines.GPU.apply_probe_contraints">
<code class="descclassname">engines.GPU.</code><code class="descname">apply_probe_contraints</code><span class="sig-paren">(</span><em>probe</em>, <em>mode</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.apply_probe_contraints" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Academic License Agreement</div>
</div>
<div class="line-block">
<div class="line">Source Code</div>
</div>
<div class="line-block">
<div class="line">Introduction</div>
<div class="line">•    This license agreement sets forth the terms and conditions under which the PAUL SCHERRER INSTITUT (PSI), CH-5232 Villigen-PSI, Switzerland (hereafter “LICENSOR”)</div>
<div class="line">will grant you (hereafter “LICENSEE”) a royalty-free, non-exclusive license for academic, non-commercial purposes only (hereafter “LICENSE”) to use the cSAXS</div>
<div class="line">ptychography MATLAB package computer software program and associated documentation furnished hereunder (hereafter “PROGRAM”).</div>
</div>
<div class="line-block">
<div class="line">Terms and Conditions of the LICENSE</div>
<div class="line">1.   LICENSOR grants to LICENSEE a royalty-free, non-exclusive license to use the PROGRAM for academic, non-commercial purposes, upon the terms and conditions</div>
<div class="line">hereinafter set out and until termination of this license as set forth below.</div>
<div class="line">2.   LICENSEE acknowledges that the PROGRAM is a research tool still in the development stage. The PROGRAM is provided without any related services, improvements</div>
<div class="line">or warranties from LICENSOR and that the LICENSE is entered into in order to enable others to utilize the PROGRAM in their academic activities. It is the</div>
<div class="line">LICENSEE’s responsibility to ensure its proper use and the correctness of the results.”</div>
<div class="line">3.   THE PROGRAM IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR</div>
<div class="line">A PARTICULAR PURPOSE AND NONINFRINGEMENT OF ANY PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS. IN NO EVENT SHALL THE LICENSOR, THE AUTHORS OR THE COPYRIGHT</div>
<div class="line">HOLDERS BE LIABLE FOR ANY CLAIM, DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES OR OTHER LIABILITY ARISING FROM, OUT OF OR IN CONNECTION WITH THE PROGRAM OR THE USE</div>
<div class="line">OF THE PROGRAM OR OTHER DEALINGS IN THE PROGRAM.</div>
<div class="line">4.   LICENSEE agrees that it will use the PROGRAM and any modifications, improvements, or derivatives of PROGRAM that LICENSEE may create (collectively,</div>
<div class="line">“IMPROVEMENTS”) solely for academic, non-commercial purposes and that any copy of PROGRAM or derivatives thereof shall be distributed only under the same</div>
<div class="line">license as PROGRAM. The terms “academic, non-commercial”, as used in this Agreement, mean academic or other scholarly research which (a) is not undertaken for</div>
<div class="line">profit, or (b) is not intended to produce works, services, or data for commercial use, or (c) is neither conducted, nor funded, by a person or an entity engaged</div>
<div class="line">in the commercial use, application or exploitation of works similar to the PROGRAM.</div>
<div class="line">5.   LICENSEE agrees that it shall make the following acknowledgement in any publication resulting from the use of the PROGRAM or any translation of the code into</div>
<div class="line">another computing language:</div>
<div class="line">“Data processing was carried out using the cSAXS ptychography MATLAB package developed by the Science IT and the coherent X-ray scattering (CXS) groups, Paul</div>
<div class="line">Scherrer Institut, Switzerland.”</div>
</div>
<div class="line-block">
<div class="line">Additionally, any publication using the package, or any translation of the code into another computing language should cite for difference map:</div>
<div class="line">P. Thibault, M. Dierolf, A. Menzel, O. Bunk, C. David, F. Pfeiffer, High-resolution scanning X-ray diffraction microscopy, Science 321, 379–382 (2008).</div>
<div class="line">(doi: 10.1126/science.1158573),</div>
<div class="line">for mixed coherent modes:</div>
<div class="line">P. Thibault and A. Menzel, Reconstructing state mixtures from diffraction measurements, Nature 494, 68–71 (2013). (doi: 10.1038/nature11806),</div>
<div class="line">for LSQ-ML method</div>
<div class="line">M. Odstrcil, A. Menzel, M.G. Sicairos,  Iterative least-squares solver for generalized maximum-likelihood ptychography, Optics Express, 2018</div>
<div class="line">for OPRP method</div>
<div class="line">M. Odstrcil, P. Baksh, S. A. Boden, R. Card, J. E. Chad, J. G. Frey, W. S. Brocklesby,  “Ptychographic coherent diffractive imaging with orthogonal probe relaxation.” Optics express 24.8 (2016): 8360-8369</div>
<div class="line">and/or for multislice:</div>
<div class="line">E. H. R. Tsai, I. Usov, A. Diaz, A. Menzel, and M. Guizar-Sicairos, X-ray ptychography with extended depth of field, Opt. Express 24, 29089–29108 (2016).</div>
<div class="line">6.   Except for the above-mentioned acknowledgment, LICENSEE shall not use the PROGRAM title or the names or logos of LICENSOR, nor any adaptation thereof, nor the</div>
<div class="line">names of any of its employees or laboratories, in any advertising, promotional or sales material without prior written consent obtained from LICENSOR in each case.</div>
<div class="line">7.   Ownership of all rights, including copyright in the PROGRAM and in any material associated therewith, shall at all times remain with LICENSOR, and LICENSEE</div>
<div class="line">agrees to preserve same. LICENSEE agrees not to use any portion of the PROGRAM or of any IMPROVEMENTS in any machine-readable form outside the PROGRAM, nor to</div>
<div class="line">make any copies except for its internal use, without prior written consent of LICENSOR. LICENSEE agrees to place the following copyright notice on any such copies:</div>
<div class="line">© All rights reserved. PAUL SCHERRER INSTITUT, Switzerland, Laboratory for Macromolecules and Bioimaging, 2017.</div>
<div class="line">8.   The LICENSE shall not be construed to confer any rights upon LICENSEE by implication or otherwise except as specifically set forth herein.</div>
<div class="line">9.   DISCLAIMER: LICENSEE shall be aware that Phase Focus Limited of Sheffield, UK has an international portfolio of patents and pending applications which relate</div>
<div class="line">to ptychography and that the PROGRAM may be capable of being used in circumstances which may fall within the claims of one or more of the Phase Focus patents,</div>
<div class="line">in particular of patent with international application number PCT/GB2005/001464. The LICENSOR explicitly declares not to indemnify the users of the software</div>
<div class="line">in case Phase Focus or any other third party will open a legal action against the LICENSEE due to the use of the program.</div>
<div class="line">10.  This Agreement shall be governed by the material laws of Switzerland and any dispute arising out of this Agreement or use of the PROGRAM shall be brought before</div>
<div class="line">the courts of Zürich, Switzerland.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">probe</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-apply-smoothness-constraint"></span><dl class="function">
<dt id="engines.GPU.apply_smoothness_constraint">
<code class="descclassname">engines.GPU.</code><code class="descname">apply_smoothness_constraint</code><span class="sig-paren">(</span><em>x</em>, <em>alpha</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.apply_smoothness_constraint" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">simple relaxed smoothness constaint</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">x</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-back-fourier-proj"></span><dl class="function">
<dt id="engines.GPU.back_fourier_proj">
<code class="descclassname">engines.GPU.</code><code class="descname">back_fourier_proj</code><span class="sig-paren">(</span><em>Psi</em>, <em>mode</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.back_fourier_proj" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Description: back propagate to the sample plane</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Psi</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-calculate-conj-grad-dir"></span><dl class="function">
<dt id="engines.GPU.calculate_conj_grad_dir">
<code class="descclassname">engines.GPU.</code><code class="descname">calculate_conj_grad_dir</code><span class="sig-paren">(</span><em>self</em>, <em>x_n</em>, <em>x_0</em>, <em>h</em>, <em>W</em>, <em>cache</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.calculate_conj_grad_dir" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [x_0, h] = calculate_conj_grad_dir(self,x_n, x_0, h, W, cache)</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">x_0, h</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-check-gpu-memory"></span><dl class="function">
<dt id="engines.GPU.check_gpu_memory">
<code class="descclassname">engines.GPU.</code><code class="descname">check_gpu_memory</code><span class="sig-paren">(</span><em>show</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.check_gpu_memory" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION memory_out = check_gpu_memory(show)</div>
<div class="line">Description: check and possibly report the available GPU memory</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">memory_out</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-clean-residua"></span><dl class="function">
<dt id="engines.GPU.clean_residua">
<code class="descclassname">engines.GPU.</code><code class="descname">clean_residua</code><span class="sig-paren">(</span><em>self</em>, <em>cache</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.clean_residua" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION self = clean_residua(self)</div>
<div class="line">use 2D FFT unwrapping to remove phase residua</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-extract-pca"></span><dl class="function">
<dt id="engines.GPU.extract_PCA">
<code class="descclassname">engines.GPU.</code><code class="descname">extract_PCA</code><span class="sig-paren">(</span><em>x</em>, <em>N</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.extract_PCA" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">[X,V] = extract_PCA(x, N)</div>
<div class="line">Extract N principal compenents of 3D array x using SVD</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">X, V</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-find-geom-correction"></span><dl class="function">
<dt id="engines.GPU.find_geom_correction">
<code class="descclassname">engines.GPU.</code><code class="descname">find_geom_correction</code><span class="sig-paren">(</span><em>self</em>, <em>cache</em>, <em>par</em>, <em>iter</em>, <em>best_mode_id</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.find_geom_correction" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION  [self] = find_geom_correction(self,cache, par, iter,best_mode_id)</div>
<div class="line">use current probe positions estimates to update geometry model and</div>
<div class="line">improve the  new probe positions</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-flip-mirror-scan"></span><dl class="function">
<dt id="engines.GPU.flip_mirror_scan">
<code class="descclassname">engines.GPU.</code><code class="descname">flip_mirror_scan</code><span class="sig-paren">(</span><em>self</em>, <em>align_objects</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.flip_mirror_scan" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION   self = flip_mirror_scan(self)</div>
<div class="line">join two scans obtained at 0 and 180 degrees to get a better estiamte</div>
<div class="line">of geometry errors</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-fwd-fourier-proj"></span><dl class="function">
<dt id="engines.GPU.fwd_fourier_proj">
<code class="descclassname">engines.GPU.</code><code class="descname">fwd_fourier_proj</code><span class="sig-paren">(</span><em>Psi</em>, <em>mode</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.fwd_fourier_proj" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION   Psi = fwd_fourier_proj(Psi, mode)</div>
<div class="line">Description: forward propagation</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Psi</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-close-indices"></span><dl class="function">
<dt id="engines.GPU.get_close_indices">
<code class="descclassname">engines.GPU.</code><code class="descname">get_close_indices</code><span class="sig-paren">(</span><em>self</em>, <em>cache</em>, <em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_close_indices" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION   [indices_out, scan_ids_out] = get_close_indices(self, cache, par )</div>
<div class="line">Description: simple based method to select indices for DM</div>
<div class="line">!! GPU needs the sets to be with similar , ideally the same sizes !!!</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">indices_out, scan_ids_out</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-forward-model"></span><dl class="function">
<dt id="engines.GPU.get_forward_model">
<code class="descclassname">engines.GPU.</code><code class="descname">get_forward_model</code><span class="sig-paren">(</span><em>self</em>, <em>obj_proj</em>, <em>par</em>, <em>cache</em>, <em>g_ind</em>, <em>p_ind</em>, <em>scan_ids</em>, <em>layer_ids</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_forward_model" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Academic License Agreement</div>
</div>
<div class="line-block">
<div class="line">Source Code</div>
</div>
<div class="line-block">
<div class="line">Introduction</div>
<div class="line">•    This license agreement sets forth the terms and conditions under which the PAUL SCHERRER INSTITUT (PSI), CH-5232 Villigen-PSI, Switzerland (hereafter “LICENSOR”)</div>
<div class="line">will grant you (hereafter “LICENSEE”) a royalty-free, non-exclusive license for academic, non-commercial purposes only (hereafter “LICENSE”) to use the cSAXS</div>
<div class="line">ptychography MATLAB package computer software program and associated documentation furnished hereunder (hereafter “PROGRAM”).</div>
</div>
<div class="line-block">
<div class="line">Terms and Conditions of the LICENSE</div>
<div class="line">1.   LICENSOR grants to LICENSEE a royalty-free, non-exclusive license to use the PROGRAM for academic, non-commercial purposes, upon the terms and conditions</div>
<div class="line">hereinafter set out and until termination of this license as set forth below.</div>
<div class="line">2.   LICENSEE acknowledges that the PROGRAM is a research tool still in the development stage. The PROGRAM is provided without any related services, improvements</div>
<div class="line">or warranties from LICENSOR and that the LICENSE is entered into in order to enable others to utilize the PROGRAM in their academic activities. It is the</div>
<div class="line">LICENSEE’s responsibility to ensure its proper use and the correctness of the results.”</div>
<div class="line">3.   THE PROGRAM IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR</div>
<div class="line">A PARTICULAR PURPOSE AND NONINFRINGEMENT OF ANY PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS. IN NO EVENT SHALL THE LICENSOR, THE AUTHORS OR THE COPYRIGHT</div>
<div class="line">HOLDERS BE LIABLE FOR ANY CLAIM, DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES OR OTHER LIABILITY ARISING FROM, OUT OF OR IN CONNECTION WITH THE PROGRAM OR THE USE</div>
<div class="line">OF THE PROGRAM OR OTHER DEALINGS IN THE PROGRAM.</div>
<div class="line">4.   LICENSEE agrees that it will use the PROGRAM and any modifications, improvements, or derivatives of PROGRAM that LICENSEE may create (collectively,</div>
<div class="line">“IMPROVEMENTS”) solely for academic, non-commercial purposes and that any copy of PROGRAM or derivatives thereof shall be distributed only under the same</div>
<div class="line">license as PROGRAM. The terms “academic, non-commercial”, as used in this Agreement, mean academic or other scholarly research which (a) is not undertaken for</div>
<div class="line">profit, or (b) is not intended to produce works, services, or data for commercial use, or (c) is neither conducted, nor funded, by a person or an entity engaged</div>
<div class="line">in the commercial use, application or exploitation of works similar to the PROGRAM.</div>
<div class="line">5.   LICENSEE agrees that it shall make the following acknowledgement in any publication resulting from the use of the PROGRAM or any translation of the code into</div>
<div class="line">another computing language:</div>
<div class="line">“Data processing was carried out using the cSAXS ptychography MATLAB package developed by the Science IT and the coherent X-ray scattering (CXS) groups, Paul</div>
<div class="line">Scherrer Institut, Switzerland.”</div>
</div>
<div class="line-block">
<div class="line">Additionally, any publication using the package, or any translation of the code into another computing language should cite for difference map:</div>
<div class="line">P. Thibault, M. Dierolf, A. Menzel, O. Bunk, C. David, F. Pfeiffer, High-resolution scanning X-ray diffraction microscopy, Science 321, 379–382 (2008).</div>
<div class="line">(doi: 10.1126/science.1158573),</div>
<div class="line">for maximum likelihood:</div>
<div class="line">P. Thibault and M. Guizar-Sicairos, Maximum-likelihood refinement for coherent diffractive imaging, New J. Phys. 14, 063004 (2012).</div>
<div class="line">(doi: 10.1088/1367-2630/14/6/063004),</div>
<div class="line">for mixed coherent modes:</div>
<div class="line">P. Thibault and A. Menzel, Reconstructing state mixtures from diffraction measurements, Nature 494, 68–71 (2013). (doi: 10.1038/nature11806),</div>
<div class="line">and/or for multislice:</div>
<div class="line">E. H. R. Tsai, I. Usov, A. Diaz, A. Menzel, and M. Guizar-Sicairos, X-ray ptychography with extended depth of field, Opt. Express 24, 29089–29108 (2016).</div>
<div class="line">(doi: 10.1364/OE.24.029089).</div>
<div class="line">6.   Except for the above-mentioned acknowledgment, LICENSEE shall not use the PROGRAM title or the names or logos of LICENSOR, nor any adaptation thereof, nor the</div>
<div class="line">names of any of its employees or laboratories, in any advertising, promotional or sales material without prior written consent obtained from LICENSOR in each case.</div>
<div class="line">7.   Ownership of all rights, including copyright in the PROGRAM and in any material associated therewith, shall at all times remain with LICENSOR, and LICENSEE</div>
<div class="line">agrees to preserve same. LICENSEE agrees not to use any portion of the PROGRAM or of any IMPROVEMENTS in any machine-readable form outside the PROGRAM, nor to</div>
<div class="line">make any copies except for its internal use, without prior written consent of LICENSOR. LICENSEE agrees to place the following copyright notice on any such copies:</div>
<div class="line">© All rights reserved. PAUL SCHERRER INSTITUT, Switzerland, Laboratory for Macromolecules and Bioimaging, 2017.</div>
<div class="line">8.   The LICENSE shall not be construed to confer any rights upon LICENSEE by implication or otherwise except as specifically set forth herein.</div>
<div class="line">9.   DISCLAIMER: LICENSEE shall be aware that Phase Focus Limited of Sheffield, UK has an international portfolio of patents and pending applications which relate</div>
<div class="line">to ptychography and that the PROGRAM may be capable of being used in circumstances which may fall within the claims of one or more of the Phase Focus patents,</div>
<div class="line">in particular of patent with international application number PCT/GB2005/001464. The LICENSOR explicitly declares not to indemnify the users of the software</div>
<div class="line">in case Phase Focus or any other third party will open a legal action against the LICENSEE due to the use of the program.</div>
<div class="line">10.  This Agreement shall be governed by the material laws of Switzerland and any dispute arising out of this Agreement or use of the PROGRAM shall be brought before</div>
<div class="line">the courts of Zürich, Switzerland.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self, probe, obj_proj, psi</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-fourier-error"></span><dl class="function">
<dt id="engines.GPU.get_fourier_error">
<code class="descclassname">engines.GPU.</code><code class="descname">get_fourier_error</code><span class="sig-paren">(</span><em>modF</em>, <em>aPsi</em>, <em>Noise</em>, <em>Mask</em>, <em>likelihood</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_fourier_error" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION  Err = get_fourier_error(modF, aPsi, Noise,Mask, likelihood)</div>
<div class="line">Description: fast calculation of the Fourier plane</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Err</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-mask"></span><dl class="function">
<dt id="engines.GPU.get_mask">
<code class="descclassname">engines.GPU.</code><code class="descname">get_mask</code><span class="sig-paren">(</span><em>self</em>, <em>mask_indices</em>, <em>ind</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_mask" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION  mask = get_mask(self,mask_indices, ind)</div>
<div class="line">Description:  get self.mask for current list of indices ind</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">mask</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-modulus"></span><dl class="function">
<dt id="engines.GPU.get_modulus">
<code class="descclassname">engines.GPU.</code><code class="descname">get_modulus</code><span class="sig-paren">(</span><em>self</em>, <em>cache</em>, <em>ind</em>, <em>move_to_gpu</em>, <em>bunch_id</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_modulus" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION  modF = get_modulus(self, cache, ind, move_to_gpu, bunch_id)</div>
<div class="line">load and prepare data for current positions ind</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">modF</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-noise"></span><dl class="function">
<dt id="engines.GPU.get_noise">
<code class="descclassname">engines.GPU.</code><code class="descname">get_noise</code><span class="sig-paren">(</span><em>self</em>, <em>par</em>, <em>g_ind</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_noise" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION noise = get_noise(self, par, g_ind)</div>
<div class="line">load and prepare noise estimate for current positions ind</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">noise</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-nonoverlapping-indices"></span><dl class="function">
<dt id="engines.GPU.get_nonoverlapping_indices">
<code class="descclassname">engines.GPU.</code><code class="descname">get_nonoverlapping_indices</code><span class="sig-paren">(</span><em>self</em>, <em>cache</em>, <em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_nonoverlapping_indices" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [indices_out, scan_ids_out] = get_nonoverlapping_indices(self, cache, par )</div>
<div class="line">Description: a heuristic based method to select pseudorandom indices of non overlapping regions</div>
<div class="line">Note: It can be slow for large number of scanning positions</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">indices_out, scan_ids_out</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-object-extent"></span><dl class="function">
<dt id="engines.GPU.get_object_extent">
<code class="descclassname">engines.GPU.</code><code class="descname">get_object_extent</code><span class="sig-paren">(</span><em>probe_size</em>, <em>probe_positions</em>, <em>extra</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_object_extent" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION Np_o_new = get_object_extent(probe_size, probe_positions, extra)</div>
<div class="line">Description: estimate the minimal area surrounding all the probe positions</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Np_o_new</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-optimal-lsq-step"></span><dl class="function">
<dt id="engines.GPU.get_optimal_LSQ_step">
<code class="descclassname">engines.GPU.</code><code class="descname">get_optimal_LSQ_step</code><span class="sig-paren">(</span><em>self</em>, <em>chi</em>, <em>dO</em>, <em>dP</em>, <em>O</em>, <em>P</em>, <em>p_ind</em>, <em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_optimal_LSQ_step" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">find optimal step in the LSQ sense</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">beta_probe, beta_object</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-reciprocal-model"></span><dl class="function">
<dt id="engines.GPU.get_reciprocal_model">
<code class="descclassname">engines.GPU.</code><code class="descname">get_reciprocal_model</code><span class="sig-paren">(</span><em>self</em>, <em>Psi</em>, <em>modF</em>, <em>mask</em>, <em>iter</em>, <em>g_ind</em>, <em>par</em>, <em>cache</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_reciprocal_model" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [aPsi, aPsi2, cache, self] = get_reciprocal_model(self, Psi, modF, mask,iter, g_ind, par, cache)</div>
<div class="line">Description: get estimate of the measured intensity from given electric</div>
<div class="line">field Psi</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">aPsi, aPsi2, cache, self</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-scanning-indices"></span><dl class="function">
<dt id="engines.GPU.get_scanning_indices">
<code class="descclassname">engines.GPU.</code><code class="descname">get_scanning_indices</code><span class="sig-paren">(</span><em>self</em>, <em>cache</em>, <em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_scanning_indices" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [indices_out, scan_ids_out] = get_scanning_indices(self, cache, par )</div>
<div class="line">Description: simple based method to select indices for DM</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">indices_out, scan_ids_out</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-variable-probe"></span><dl class="function">
<dt id="engines.GPU.get_variable_probe">
<code class="descclassname">engines.GPU.</code><code class="descname">get_variable_probe</code><span class="sig-paren">(</span><em>probe</em>, <em>probe_evolution</em>, <em>p_ind</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_variable_probe" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION probe = get_variable_probe(probe, probe_evolution, p_ind)</div>
<div class="line">Description: calculate variable probe for given mean/var probe and its evolution inputs</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">probe</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-views"></span><dl class="function">
<dt id="engines.GPU.get_views">
<code class="descclassname">engines.GPU.</code><code class="descname">get_views</code><span class="sig-paren">(</span><em>object</em>, <em>obj_proj</em>, <em>layer</em>, <em>ll</em>, <em>ii</em>, <em>cache</em>, <em>scan_ids</em>, <em>skip_ind</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_views" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION obj_proj = get_views(object, obj_proj,layer,ll, ii, cache, scan_ids, skip_ind)</div>
<div class="line">Description: estimate the minimal area surrounding all the probe positions</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">obj_proj</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-gpu-wrapper"></span><dl class="function">
<dt id="engines.GPU.gpu_wrapper">
<code class="descclassname">engines.GPU.</code><code class="descname">gpu_wrapper</code><span class="sig-paren">(</span><em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.gpu_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION param= gpu_wrapper(param)</div>
<div class="line">Description: wrap the GPU functions for user so that CPU and GPU code is identical</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">param</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-gradient-nf-propagation-solver"></span><dl class="function">
<dt id="engines.GPU.gradient_NF_propagation_solver">
<code class="descclassname">engines.GPU.</code><code class="descname">gradient_NF_propagation_solver</code><span class="sig-paren">(</span><em>self</em>, <em>psi</em>, <em>xi</em>, <em>cache</em>, <em>ind</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.gradient_NF_propagation_solver" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION self = gradient_NF_propagation_solver(self,psi,xi, cache, ind)</div>
<div class="line">Description: update estimate of the nearfield propagation distance based on the</div>
<div class="line">current update of the wavefront</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-gradient-descent-xi-solver"></span><dl class="function">
<dt id="engines.GPU.gradient_descent_xi_solver">
<code class="descclassname">engines.GPU.</code><code class="descname">gradient_descent_xi_solver</code><span class="sig-paren">(</span><em>self</em>, <em>modF</em>, <em>aPsi2</em>, <em>R</em>, <em>mask</em>, <em>ind</em>, <em>beta_chi</em>, <em>cache</em>, <em>Psi</em>, <em>chi</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.gradient_descent_xi_solver" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [beta_chi, find_chi_step] =  gradient_descent_xi_solver(self,modF, aPsi2, R,mask, ind, beta_chi, cache, Psi, chi)</div>
<div class="line">Description: solve optimal update step for the Poisson noise method</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">beta_chi, find_chi_step</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-gradient-fourier-position-solver"></span><dl class="function">
<dt id="engines.GPU.gradient_fourier_position_solver">
<code class="descclassname">engines.GPU.</code><code class="descname">gradient_fourier_position_solver</code><span class="sig-paren">(</span><em>xi</em>, <em>O</em>, <em>P</em>, <em>mode</em>, <em>ind</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.gradient_fourier_position_solver" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION mode = gradient_fourier_position_solver(xi,O,P,mode, ind)</div>
<div class="line">Description: solve position errors in the Fourier space</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">mode</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-gradient-position-solver"></span><dl class="function">
<dt id="engines.GPU.gradient_position_solver">
<code class="descclassname">engines.GPU.</code><code class="descname">gradient_position_solver</code><span class="sig-paren">(</span><em>self</em>, <em>xi</em>, <em>O</em>, <em>P</em>, <em>ind</em>, <em>iter</em>, <em>cache</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.gradient_position_solver" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION pos_update = gradient_position_solver(xi,O,P,ind)</div>
<div class="line">Description: solve position errors in the real space</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">pos_update, cache</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-gradient-projection-solver"></span><dl class="function">
<dt id="engines.GPU.gradient_projection_solver">
<code class="descclassname">engines.GPU.</code><code class="descname">gradient_projection_solver</code><span class="sig-paren">(</span><em>self</em>, <em>xi</em>, <em>O</em>, <em>P</em>, <em>dO</em>, <em>dP</em>, <em>p_ind</em>, <em>par</em>, <em>cache</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.gradient_projection_solver" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [beta_p, beta_o] =  gradient_projection_solver(self,xi,O,P,dO,dP,p_ind,par, cache)</div>
<div class="line">Description:  1D search for the optimal step in the gradients descent-like methods</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">beta_p, beta_o</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-initial-checks"></span><dl class="function">
<dt id="engines.GPU.initial_checks">
<code class="descclassname">engines.GPU.</code><code class="descname">initial_checks</code><span class="sig-paren">(</span><em>self</em>, <em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.initial_checks" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [self,par] = initial_checks(self, par)</div>
<div class="line">Description: check if the inputs are valid or try to correct them</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self, par</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">initialize</code></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [param] = initialize</div>
<div class="line">list of default parameters</div>
</div>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-initialize-solver"></span><dl class="function">
<dt id="engines.GPU.initialize_solver">
<code class="descclassname">engines.GPU.</code><code class="descname">initialize_solver</code><span class="sig-paren">(</span><em>self</em>, <em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.initialize_solver" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION  [self, cache] = initialize_solver(self,par)</div>
<div class="line">initialize GPU ptycho reconstruction, generate cache values, fftshift</div>
<div class="line">data, etc</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self, cache</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-is-method"></span><dl class="function">
<dt id="engines.GPU.is_method">
<code class="descclassname">engines.GPU.</code><code class="descname">is_method</code><span class="sig-paren">(</span><em>par</em>, <em>method</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.is_method" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION match = is_method(par, method)</div>
<div class="line">try if the method match or at least partially match</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">match</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-is-used"></span><dl class="function">
<dt id="engines.GPU.is_used">
<code class="descclassname">engines.GPU.</code><code class="descname">is_used</code><span class="sig-paren">(</span><em>param</em>, <em>extension</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.is_used" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION used = is_used(param, extension)</div>
<div class="line">Description:  Check if the extension/extensions is set to be used</div>
<div class="line">Example: is_used(param, {‘ext1’, ‘ext2’})</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">used</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-modulus-constraint"></span><dl class="function">
<dt id="engines.GPU.modulus_constraint">
<code class="descclassname">engines.GPU.</code><code class="descname">modulus_constraint</code><span class="sig-paren">(</span><em>modF</em>, <em>aPsi</em>, <em>Psi</em>, <em>mask</em>, <em>noise</em>, <em>relax_noise</em>, <em>likelihood</em>, <em>R_offset</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.modulus_constraint" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [chi,R] = modulus_constraint(modF,aPsi ,Psi, mask, noise, relax_noise,likelihood , R_offset)</div>
<div class="line">Description: universal fast relaxed modulus constraint</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">chi, R</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-move-from-gpu"></span><dl class="function">
<dt id="engines.GPU.move_from_gpu">
<code class="descclassname">engines.GPU.</code><code class="descname">move_from_gpu</code><span class="sig-paren">(</span><em>self</em>, <em>move_from_GPU</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.move_from_gpu" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION self =  move_from_gpu(self, move_from_GPU)</div>
<div class="line">Description: move reconstruction back from GPU to RAM</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-move-to-gpu"></span><dl class="function">
<dt id="engines.GPU.move_to_gpu">
<code class="descclassname">engines.GPU.</code><code class="descname">move_to_gpu</code><span class="sig-paren">(</span><em>self</em>, <em>cache</em>, <em>move_data</em>, <em>split_data</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.move_to_gpu" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION self =  move_to_gpu(self,cache, move_data, split_data)</div>
<div class="line">Description: move reconstruction from RAM to GPU</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self, cache</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-online-fsc-estimate"></span><dl class="function">
<dt id="engines.GPU.online_FSC_estimate">
<code class="descclassname">engines.GPU.</code><code class="descname">online_FSC_estimate</code><span class="sig-paren">(</span><em>self</em>, <em>par</em>, <em>cache</em>, <em>score_0</em>, <em>iter</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.online_FSC_estimate" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">score = online_FSC_estimate(self, par, cache, score_0, iter)</div>
<div class="line">compare two scans and estimate FSC and other statistics</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">score</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-plot-background-intensity"></span><dl class="function">
<dt id="engines.GPU.plot_background_intensity">
<code class="descclassname">engines.GPU.</code><code class="descname">plot_background_intensity</code><span class="sig-paren">(</span><em>self</em>, <em>probe</em>, <em>background</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.plot_background_intensity" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION plot_background_intensity(self,probe,  background)</div>
</div>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-plot-frc-analysis"></span><dl class="function">
<dt id="engines.GPU.plot_frc_analysis">
<code class="descclassname">engines.GPU.</code><code class="descname">plot_frc_analysis</code><span class="sig-paren">(</span><em>score</em>, <em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.plot_frc_analysis" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION plot_frc_analysis(score, par)</div>
<div class="line">plot evolution of the resolution and SNR estimated from the FRC</div>
</div>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-plot-geom-corrections"></span><dl class="function">
<dt id="engines.GPU.plot_geom_corrections">
<code class="descclassname">engines.GPU.</code><code class="descname">plot_geom_corrections</code><span class="sig-paren">(</span><em>self</em>, <em>mode</em>, <em>object</em>, <em>iter</em>, <em>par</em>, <em>cache</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.plot_geom_corrections" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION plot_geom_corrections(self, mode, object, iter, par, cache)</div>
<div class="line">plot positiones updates</div>
</div>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-plot-intensity-corr"></span><dl class="function">
<dt id="engines.GPU.plot_intensity_corr">
<code class="descclassname">engines.GPU.</code><code class="descname">plot_intensity_corr</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.plot_intensity_corr" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION plot_geom_corrections(self, mode, object, iter, par, cache)</div>
<div class="line">plot intensity correction evolution</div>
</div>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-plot-object-modes"></span><dl class="function">
<dt id="engines.GPU.plot_object_modes">
<code class="descclassname">engines.GPU.</code><code class="descname">plot_object_modes</code><span class="sig-paren">(</span><em>self</em>, <em>cache</em>, <em>ROI</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.plot_object_modes" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION plot_object{ii}(self, object{ii},par, id, show_ROI, scales, ROI)</div>
<div class="line">plot incoherent object{ii} of object{ii} or the probes</div>
</div>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-plot-probe-modes"></span><dl class="function">
<dt id="engines.GPU.plot_probe_modes">
<code class="descclassname">engines.GPU.</code><code class="descname">plot_probe_modes</code><span class="sig-paren">(</span><em>self</em>, <em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.plot_probe_modes" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION plot_probe(self, probe,par, id, show_ROI, scales, ROI)</div>
<div class="line">plot incoherent probe of object or the probes</div>
</div>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-plot-results"></span><dl class="function">
<dt id="engines.GPU.plot_results">
<code class="descclassname">engines.GPU.</code><code class="descname">plot_results</code><span class="sig-paren">(</span><em>self</em>, <em>cache</em>, <em>par</em>, <em>fourier_error</em>, <em>probe_positions</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.plot_results" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION plot_results(self, cache, par, fourier_error,probe_positions)</div>
<div class="line">Description: show current reconstruction and errors during ptychography</div>
</div>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-plot-variable-probe"></span><dl class="function">
<dt id="engines.GPU.plot_variable_probe">
<code class="descclassname">engines.GPU.</code><code class="descname">plot_variable_probe</code><span class="sig-paren">(</span><em>self</em>, <em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.plot_variable_probe" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION plot_variable_probe(self, par)</div>
<div class="line">plot SVD decomposition of the probes to show their differences</div>
</div>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-precalculate-roi"></span><dl class="function">
<dt id="engines.GPU.precalculate_ROI">
<code class="descclassname">engines.GPU.</code><code class="descname">precalculate_ROI</code><span class="sig-paren">(</span><em>self</em>, <em>cache</em>, <em>probe</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.precalculate_ROI" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION plot_variable_probe(self, par)</div>
<div class="line">Description: precalculate the ROIs area for faster calculations</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">cache</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-prepare-flyscan-positions"></span><dl class="function">
<dt id="engines.GPU.prepare_flyscan_positions">
<code class="descclassname">engines.GPU.</code><code class="descname">prepare_flyscan_positions</code><span class="sig-paren">(</span><em>self</em>, <em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.prepare_flyscan_positions" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">engines.GPU.prepare_flyscan_positions is a function.</div>
<div class="line">self = prepare_flyscan_positions(self, par)</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-ptycho-solver"></span><dl class="function">
<dt id="engines.GPU.ptycho_solver">
<code class="descclassname">engines.GPU.</code><code class="descname">ptycho_solver</code><span class="sig-paren">(</span><em>self</em>, <em>par</em>, <em>cache</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.ptycho_solver" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION plot_variable_probe(self, par)</div>
<div class="line">Description: the main loop of ptychography. Call the selected engine</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">outputs, fourier_error, fsc_score</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-rescale-inputs"></span><dl class="function">
<dt id="engines.GPU.rescale_inputs">
<code class="descclassname">engines.GPU.</code><code class="descname">rescale_inputs</code><span class="sig-paren">(</span><em>self</em>, <em>Np_p_new</em>, <em>rescale_data</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.rescale_inputs" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION self = rescale_inputs(self, Np_p_new, rescale_data)</div>
<div class="line">multigrid scheme method ,</div>
<div class="line">INPUTS:</div>
<div class="line">Np_p_new - new size of the rescaled dataset</div>
<div class="line">rescale_data = true -&gt; rescale also data + mask + noise arrays</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-set-views"></span><dl class="function">
<dt id="engines.GPU.set_views">
<code class="descclassname">engines.GPU.</code><code class="descname">set_views</code><span class="sig-paren">(</span><em>object</em>, <em>object_update</em>, <em>layer</em>, <em>ll</em>, <em>ii</em>, <em>cache</em>, <em>scan_ids</em>, <em>skip_ind</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.set_views" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION object = set_views(object, object_update, layer,ll, ii, cache, scan_ids, skip_ind)</div>
<div class="line">Description: Reduce stack of projections into one shared object</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">object</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-set-views-rc"></span><dl class="function">
<dt id="engines.GPU.set_views_rc">
<code class="descclassname">engines.GPU.</code><code class="descname">set_views_rc</code><span class="sig-paren">(</span><em>obj_update</em>, <em>obj_illum</em>, <em>psi_tmp</em>, <em>aprobe</em>, <em>layer</em>, <em>ll</em>, <em>ii</em>, <em>cache</em>, <em>scan_ids</em>, <em>skip_ind</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.set_views_rc" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [obj_update,obj_illum] = set_views_rc(obj_update,obj_illum, psi_tmp,aprobe,layer,ll, ii, cache, scan_ids, skip_ind, Nobjects)</div>
<div class="line">Description: update complex and real object at once</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">obj_update, obj_illum</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-update-variable-probe"></span><dl class="function">
<dt id="engines.GPU.update_variable_probe">
<code class="descclassname">engines.GPU.</code><code class="descname">update_variable_probe</code><span class="sig-paren">(</span><em>self</em>, <em>probe</em>, <em>probe_evolution</em>, <em>m_probe_update</em>, <em>probe_update</em>, <em>obj_proj</em>, <em>chi</em>, <em>weights</em>, <em>p_ind</em>, <em>g_ind</em>, <em>cache</em>, <em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.update_variable_probe" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [probe, probe_evolution] = update_variable_probe(self,probe, probe_evolution, m_probe_update,probe_update, obj_proj, chi, weights, p_ind, g_ind, cache, par)</div>
<div class="line">approximation of the OPRP method to get only the first orthogonal</div>
<div class="line">vector describing the probe</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">probe, probe_evolution</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="engines-gpu-private">
<h3>+engines/+GPU/private<a class="headerlink" href="#engines-gpu-private" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-engines-gpu-cat-struct"></span><dl class="function">
<dt id="engines.GPU.cat_struct">
<code class="descclassname">engines.GPU.</code><code class="descname">cat_struct</code><span class="sig-paren">(</span><em>struct</em>, <em>name</em>, <em>ind</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.cat_struct" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION array = cat_struct( struct, name, ind)</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">array</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-distmat"></span><dl class="function">
<dt id="engines.GPU.distmat">
<code class="descclassname">engines.GPU.</code><code class="descname">distmat</code><span class="sig-paren">(</span><em>a</em>, <em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.distmat" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">DISTMAT Compute a Distance Matrix for One or Two Sets of Points</div>
</div>
<div class="line-block">
<div class="line">Copyright (c) 2015, Joseph Kirk</div>
<div class="line">All rights reserved.</div>
</div>
<div class="line-block">
<div class="line">Redistribution and use in source and binary forms, with or without</div>
<div class="line">modification, are permitted provided that the following conditions are</div>
<div class="line">met:</div>
</div>
<div class="line-block">
<div class="line">* Redistributions of source code must retain the above copyright</div>
<div class="line">notice, this list of conditions and the following disclaimer.</div>
<div class="line">* Redistributions in binary form must reproduce the above copyright</div>
<div class="line">notice, this list of conditions and the following disclaimer in</div>
<div class="line">the documentation and/or other materials provided with the distribution</div>
</div>
<div class="line-block">
<div class="line">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS “AS IS”</div>
<div class="line">AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</div>
<div class="line">IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</div>
<div class="line">ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE</div>
<div class="line">LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</div>
<div class="line">CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</div>
<div class="line">SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</div>
<div class="line">INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</div>
<div class="line">CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</div>
<div class="line">ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</div>
<div class="line">POSSIBILITY OF SUCH DAMAGE.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">dmat</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-fft2-safe"></span><dl class="function">
<dt id="engines.GPU.fft2_safe">
<code class="descclassname">engines.GPU.</code><code class="descname">fft2_safe</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.fft2_safe" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION x = fft2_safe(x)</div>
<div class="line">wrapper around fft2, in case of low memory it will try to repeat</div>
<div class="line">Ntimes before giving up</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">x</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-find-reconstruction-roi"></span><dl class="function">
<dt id="engines.GPU.find_reconstruction_ROI">
<code class="descclassname">engines.GPU.</code><code class="descname">find_reconstruction_ROI</code><span class="sig-paren">(</span><em>positions</em>, <em>Np_o</em>, <em>Np_p</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.find_reconstruction_ROI" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [oROI, oROI_vec, sub_px_shift] = find_reconstruction_ROI( positions,Np_o, Np_p )</div>
<div class="line">Description: precalculate the reconstruction regions for CPU and GPU</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">oROI, oROI_vec, sub_px_shift</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-fourier-ring-correlation"></span><dl class="function">
<dt id="engines.GPU.fourier_ring_correlation">
<code class="descclassname">engines.GPU.</code><code class="descname">fourier_ring_correlation</code><span class="sig-paren">(</span><em>object_1</em>, <em>object_2</em>, <em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.fourier_ring_correlation" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION [score, object{1}, object{2}] =  fourier_ring_correlation(object{1}, object{2}, varargin)</div>
<div class="line">simplified but faster version of the FRC code</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">score, object</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-fsvd"></span><dl class="function">
<dt id="engines.GPU.fsvd">
<code class="descclassname">engines.GPU.</code><code class="descname">fsvd</code><span class="sig-paren">(</span><em>A</em>, <em>k</em>, <em>i</em>, <em>usePowerMethod</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.fsvd" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">— help for svd —</div>
<div class="line">SVD    Singular value decomposition.</div>
<div class="line">[U,S,V] = SVD(X) produces a diagonal matrix S, of the same</div>
<div class="line">dimension as X and with nonnegative diagonal elements in</div>
<div class="line">decreasing order, and unitary matrices U and V so that</div>
<div class="line">X = U*S*V’.</div>
</div>
<div class="line-block">
<div class="line">S = SVD(X) returns a vector containing the singular values.</div>
</div>
<div class="line-block">
<div class="line">[U,S,V] = SVD(X,0) produces the “economy size”</div>
<div class="line">decomposition. If X is m-by-n with m &gt; n, then only the</div>
<div class="line">first n columns of U are computed and S is n-by-n.</div>
<div class="line">For m &lt;= n, SVD(X,0) is equivalent to SVD(X).</div>
</div>
<div class="line-block">
<div class="line">[U,S,V] = SVD(X,’econ’) also produces the “economy size”</div>
<div class="line">decomposition. If X is m-by-n with m &gt;= n, then it is</div>
<div class="line">equivalent to SVD(X,0). For m &lt; n, only the first m columns</div>
<div class="line">of V are computed and S is m-by-m.</div>
</div>
<div class="line-block">
<div class="line">See also SVDS, GSVD.</div>
<div class="line">Reference page in Doc Center</div>
<div class="line">doc svd</div>
<div class="line">Other functions named svd</div>
<div class="line">codistributed/svd    frd/svd    gpuArray/svd    sym/svd</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">U, S, V</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-roi"></span><dl class="function">
<dt id="engines.GPU.get_ROI">
<code class="descclassname">engines.GPU.</code><code class="descname">get_ROI</code><span class="sig-paren">(</span><em>mask</em>, <em>extent</em>, <em>type</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_ROI" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION  [ROI, range,  coord] = get_ROI(mask, extent, type)</div>
<div class="line">Description: find optimal rectange containing the mask</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">ROI</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-get-img-grad"></span><dl class="function">
<dt id="engines.GPU.get_img_grad">
<code class="descclassname">engines.GPU.</code><code class="descname">get_img_grad</code><span class="sig-paren">(</span><em>img</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.get_img_grad" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION   [dX, dY] = get_img_grad(img)</div>
<div class="line">Description:  get vertical and horizontal gradient of the image</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">dX, dY</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-ifft2-safe"></span><dl class="function">
<dt id="engines.GPU.ifft2_safe">
<code class="descclassname">engines.GPU.</code><code class="descname">ifft2_safe</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.ifft2_safe" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION  x = ifft2_safe(x)</div>
<div class="line">Description:     wrapper around fft2, in case of low memory it will</div>
<div class="line">try to repeat 5-times before giving up</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">x</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-imagesc-hsv"></span><dl class="function">
<dt id="engines.GPU.imagesc_hsv">
<code class="descclassname">engines.GPU.</code><code class="descname">imagesc_hsv</code><span class="sig-paren">(</span><em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.imagesc_hsv" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION  [cax_out, rgb_data] = imagesc_hsv(varargin)</div>
<div class="line">Description: imagesc for drawing complex number arrays</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">cax_out, rgb_data</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-intersections"></span><dl class="function">
<dt id="engines.GPU.intersections">
<code class="descclassname">engines.GPU.</code><code class="descname">intersections</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em>, <em>robust</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.intersections" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">INTERSECTIONS Intersections of curves.</div>
<div class="line">Computes the (x,y) locations where two curves intersect.  The curves</div>
<div class="line">can be broken with NaNs or have vertical segments.</div>
</div>
<div class="line-block">
<div class="line">Example:</div>
<div class="line">[X0,Y0] = intersections(X1,Y1,X2,Y2,ROBUST);</div>
</div>
<div class="line-block">
<div class="line">where X1 and Y1 are equal-length vectors of at least two points and</div>
<div class="line">represent curve 1.  Similarly, X2 and Y2 represent curve 2.</div>
<div class="line">X0 and Y0 are column vectors containing the points at which the two</div>
<div class="line">curves intersect.</div>
</div>
<div class="line-block">
<div class="line">ROBUST (optional) set to 1 or true means to use a slight variation of the</div>
<div class="line">algorithm that might return duplicates of some intersection points, and</div>
<div class="line">then remove those duplicates.  The default is true, but since the</div>
<div class="line">algorithm is slightly slower you can set it to false if you know that</div>
<div class="line">your curves don’t intersect at any segment boundaries.  Also, the robust</div>
<div class="line">version properly handles parallel and overlapping segments.</div>
</div>
<div class="line-block">
<div class="line">The algorithm can return two additional vectors that indicate which</div>
<div class="line">segment pairs contain intersections and where they are:</div>
</div>
<div class="line-block">
<div class="line">[X0,Y0,I,J] = intersections(X1,Y1,X2,Y2,ROBUST);</div>
</div>
<div class="line-block">
<div class="line">For each element of the vector I, I(k) = (segment number of (X1,Y1)) +</div>
<div class="line">(how far along this segment the intersection is).  For example, if I(k) =</div>
<div class="line">45.25 then the intersection lies a quarter of the way between the line</div>
<div class="line">segment connecting (X1(45),Y1(45)) and (X1(46),Y1(46)).  Similarly for</div>
<div class="line">the vector J and the segments in (X2,Y2).</div>
</div>
<div class="line-block">
<div class="line">You can also get intersections of a curve with itself.  Simply pass in</div>
<div class="line">only one curve, i.e.,</div>
</div>
<div class="line-block">
<div class="line">[X0,Y0] = intersections(X1,Y1,ROBUST);</div>
</div>
<div class="line-block">
<div class="line">where, as before, ROBUST is optional.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">x0, y0, iout, jout</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-near-field-evolution"></span><dl class="function">
<dt id="engines.GPU.near_field_evolution">
<code class="descclassname">engines.GPU.</code><code class="descname">near_field_evolution</code><span class="sig-paren">(</span><em>u_0</em>, <em>z</em>, <em>lambda</em>, <em>extent</em>, <em>use_ASM_only</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.near_field_evolution" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION  [u_1, H, h, dH] = near_field_evolution(u_0, z, lambda, extent, use_ASM_only)</div>
<div class="line">Description: nearfield evolution function, it automatically swithc</div>
<div class="line">between ASM and Fraunhofer propagation</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">u_1, H, h, dH</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-ortho-modes"></span><dl class="function">
<dt id="engines.GPU.ortho_modes">
<code class="descclassname">engines.GPU.</code><code class="descname">ortho_modes</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.ortho_modes" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION  x = ortho_modes(x)</div>
<div class="line">Description:  return orthogonal modes, without any normalization , expect cells</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">x</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-ortho-modes-eig"></span><dl class="function">
<dt id="engines.GPU.ortho_modes_eig">
<code class="descclassname">engines.GPU.</code><code class="descname">ortho_modes_eig</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.ortho_modes_eig" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION  x = ortho_modes_eig(x)</div>
<div class="line">Description: orthogonal modes using eigen values</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">x</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-regulation-multilayers"></span><dl class="function">
<dt id="engines.GPU.regulation_multilayers">
<code class="descclassname">engines.GPU.</code><code class="descname">regulation_multilayers</code><span class="sig-paren">(</span><em>self</em>, <em>par</em>, <em>cache</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.regulation_multilayers" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION self = regulation_multilayers(self, par, cache)</div>
<div class="line">Description: try to avoid ambiguity in yhr multilayer reconstruction</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-shift-probe"></span><dl class="function">
<dt id="engines.GPU.shift_probe">
<code class="descclassname">engines.GPU.</code><code class="descname">shift_probe</code><span class="sig-paren">(</span><em>img</em>, <em>shift</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.shift_probe" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">img = shift_probe(img, shift)</div>
<div class="line">subpixel probe shifting</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">img</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-shift-probe-fft"></span><dl class="function">
<dt id="engines.GPU.shift_probe_fft">
<code class="descclassname">engines.GPU.</code><code class="descname">shift_probe_fft</code><span class="sig-paren">(</span><em>img</em>, <em>shift</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.shift_probe_fft" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">img = shift_probe_fft(img, shift)</div>
<div class="line">fast shifting in fourier space</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">img</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-gpu-show-spatial-distribution"></span><dl class="function">
<dt id="engines.GPU.show_spatial_distribution">
<code class="descclassname">engines.GPU.</code><code class="descname">show_spatial_distribution</code><span class="sig-paren">(</span><em>pos</em>, <em>values</em>, <em>symmetrize</em>, <em>plot_points</em>, <em>range</em>, <em>scale</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.GPU.show_spatial_distribution" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">FUNCTION  show_spatial_distribution(pos, values, symmetrize, plot_points, range, scale )</div>
<div class="line">Description: show spatial distribution of some variable, you can also use</div>
<div class="line">scatter or scatter_hsv</div>
</div>
</dd></dl>

</div>
<div class="section" id="engines-ml">
<h3>+engines/+ML<a class="headerlink" href="#engines-ml" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-engines-ml-brent"></span><dl class="function">
<dt id="engines.ML.brent">
<code class="descclassname">engines.ML.</code><code class="descname">brent</code><span class="sig-paren">(</span><em>func</em>, <em>x0</em>, <em>dx</em>, <em>a1</em>, <em>a</em>, <em>a2</em>, <em>f1</em>, <em>f</em>, <em>f2</em>, <em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.ML.brent" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">one-dimensional minimization by parabolic interpolation &amp; golden</div>
<div class="line">section (does not use the gradient)</div>
</div>
<div class="line-block">
<div class="line">[a,f] = brent(func,x0,dx,a1,a,a2,f1,f,f2,varargin)</div>
</div>
<div class="line-block">
<div class="line">func = string name of objective function</div>
<div class="line">x0 = starting point of linesearch</div>
<div class="line">dx = direction of linesearch</div>
<div class="line">a1,a,a2 = bracketing triplet of steplengths (a1&lt;a&lt;a2)</div>
<div class="line">f1,f,f2 = objective function at steplengths a1, a, &amp; a2</div>
<div class="line">a = output as final steplength</div>
<div class="line">f = output as objective function at final steplength</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a, f</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-ml-cgmin1"></span><dl class="function">
<dt id="engines.ML.cgmin1">
<code class="descclassname">engines.ML.</code><code class="descname">cgmin1</code><span class="sig-paren">(</span><em>func</em>, <em>x</em>, <em>itmax</em>, <em>ftol</em>, <em>xtol</em>, <em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.ML.cgmin1" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">conjugate-gradient optimization routine</div>
<div class="line">NOTE: linesearch subroutines do not use the gradient</div>
</div>
<div class="line-block">
<div class="line">[x] = cgmin1(func,x,itmax,ftol,xtol,varargin)</div>
</div>
<div class="line-block">
<div class="line">func = string name of objective function which returns both the</div>
<div class="line">objective function value and the gradient</div>
<div class="line">x = input as initial starting point and output as final point</div>
<div class="line">itmax = maximum number of iterations (empty for default = 50)</div>
<div class="line">ftol = relative function tolerance (empty for default = 1e-3)</div>
<div class="line">xtol = absolute solution tolerance (empty for default = 1e-3)</div>
<div class="line">varargin = extra variables required by objective function</div>
</div>
<div class="line-block">
<div class="line">DISCLAIMER: This code is not intended for distribution. I have many</div>
<div class="line">versions of this code and am constantly revising it. I believe this</div>
<div class="line">version is working properly. However, I will not vouch for the code.</div>
<div class="line">Anyone using the code for thesis research has a responsibility to go</div>
<div class="line">through the code line-by-line and read relevant references to understand</div>
<div class="line">the code completely. In my opinion, you have two options if you want to</div>
<div class="line">publish results obtained with the code: (i) go through the code line-by-</div>
<div class="line">line and read relevent references to understand how the code works and make</div>
<div class="line">sure it is working properly for your application, or (ii) I can sit down</div>
<div class="line">with you an go through this code and the additional code that you have</div>
<div class="line">written to go along with it and make sure it is working properly. Option</div>
<div class="line">(i) is preferred, and I ask that you do NOT acknowledge me in print (first,</div>
<div class="line">it would be more appropriate for you to reference “Numerical Recipes”,</div>
<div class="line">and second, I prefer not to be named in a paper with which I do not have</div>
<div class="line">detailed knowledge). If you decide to go with option (ii), I would expect</div>
<div class="line">to learn the details of your research and be included in the author list.</div>
</div>
<div class="line-block">
<div class="line">Sam Thurman, May 9, 2005</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">x, p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-ml-gradient-ptycho"></span><dl class="function">
<dt id="engines.ML.gradient_ptycho">
<code class="descclassname">engines.ML.</code><code class="descname">gradient_ptycho</code><span class="sig-paren">(</span><em>xopt</em>, <em>p</em>, <em>fmag2</em>, <em>initialerror</em>, <em>fnorm</em>, <em>creg</em>, <em>smooth_gradient</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.ML.gradient_ptycho" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Main code to compute error metric and gradient</div>
<div class="line">Jan 09 2013</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">func, grad, p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-ml-linesearch"></span><dl class="function">
<dt id="engines.ML.linesearch">
<code class="descclassname">engines.ML.</code><code class="descname">linesearch</code><span class="sig-paren">(</span><em>func</em>, <em>x0</em>, <em>f0</em>, <em>df0</em>, <em>dx</em>, <em>a</em>, <em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.ML.linesearch" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">linesearch routine (does not use the gradient)</div>
</div>
<div class="line-block">
<div class="line">[x,f,a,flg] = linesearch(func,x0,f0,df0,dx,a,varargin)</div>
</div>
<div class="line-block">
<div class="line">func = string name of objective function</div>
<div class="line">x0 = starting point of search</div>
<div class="line">f0 = objective function at x0</div>
<div class="line">df0 = derivative of objective function along dx at x0</div>
<div class="line">dx = direction of linesearch</div>
<div class="line">a = steplength input as guess output as taken</div>
<div class="line">x = final point of search</div>
<div class="line">f = objective function at final point</div>
<div class="line">flg = indicates how step was determined (0 for Armijo step, 1 for</div>
<div class="line">bracketing and refining a minimum)</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">x, f, a, flg</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="engines-ml-ms">
<h3>+engines/+ML_MS<a class="headerlink" href="#engines-ml-ms" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-engines-ml-ms-fun-ramp-unwrap"></span><dl class="function">
<dt id="engines.ML_MS.fun_ramp_unwrap">
<code class="descclassname">engines.ML_MS.</code><code class="descname">fun_ramp_unwrap</code><span class="sig-paren">(</span><em>object</em>, <em>asize</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.ML_MS.fun_ramp_unwrap" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">This function (1) removes ramp and (2) unwrap</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">object_phase_unwrap</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-engines-ml-ms-gradient-ptycho-ms"></span><dl class="function">
<dt id="engines.ML_MS.gradient_ptycho_MS">
<code class="descclassname">engines.ML_MS.</code><code class="descname">gradient_ptycho_MS</code><span class="sig-paren">(</span><em>xopt</em>, <em>p</em>, <em>fmag</em>, <em>fmag2</em>, <em>fmask</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.ML_MS.gradient_ptycho_MS" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">This function is intended to be only a distributor for either only ‘func’, or ‘func’ and</div>
<div class="line">‘grad’ calculation.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">func, grad, p</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="engines-c-solver">
<h3>+engines/+c_solver<a class="headerlink" href="#engines-c-solver" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-engines-c-solver-prep-initial-conditions"></span><dl class="function">
<dt id="engines.c_solver.prep_initial_conditions">
<code class="descclassname">engines.c_solver.</code><code class="descname">prep_initial_conditions</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.c_solver.prep_initial_conditions" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">PREP_INITIAL_CONDITIONS prepares the initial_conditions file for the</div>
<div class="line">reconstruction with external C++ code</div>
<div class="line">save2hdf5 is used to save the required datasets and attributes to an h5 file</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-engines-c-solver"><span class="std std-ref">engines.c_solver</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-engines-c-solver-prepare-external-call"></span><dl class="function">
<dt id="engines.c_solver.prepare_external_call">
<code class="descclassname">engines.c_solver.</code><code class="descname">prepare_external_call</code><span class="sig-paren">(</span><em>p</em>, <em>fdb</em><span class="sig-paren">)</span><a class="headerlink" href="#engines.c_solver.prepare_external_call" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Call the external reconstruction program</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p, fdb</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="scans">
<h2>+scans<a class="headerlink" href="#scans" title="Permalink to this headline">¶</a></h2>
<span class="target" id="ptycho-scans-get-filenames-csaxs"></span><dl class="function">
<dt id="scans.get_filenames_cSAXS">
<code class="descclassname">scans.</code><code class="descname">get_filenames_cSAXS</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.get_filenames_cSAXS" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">GET_FILENAMES_CSAXS compile filenames of raw data files</div>
<div class="line">receives</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-scans-get-queue"></span><dl class="function">
<dt id="scans.get_queue">
<code class="descclassname">scans.</code><code class="descname">get_queue</code><span class="sig-paren">(</span><em>p</em>, <em>update</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.get_queue" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">GET_QUEUE call queue functions in package directories</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p, status</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-scans-read-metadata"></span><dl class="function">
<dt id="scans.read_metadata">
<code class="descclassname">scans.</code><code class="descname">read_metadata</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.read_metadata" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">READ_METADATA load meta data and overwrite previous settings</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-scans-read-positions"></span><dl class="function">
<dt id="scans.read_positions">
<code class="descclassname">scans.</code><code class="descname">read_positions</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.read_positions" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">READ_POSITIONS load positions</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="scans-meta">
<h3>+scans/+meta<a class="headerlink" href="#scans-meta" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-scans-meta-artificial"></span><dl class="function">
<dt id="scans.meta.artificial">
<code class="descclassname">scans.meta.</code><code class="descname">artificial</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.meta.artificial" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">SPEC load meta data from a spec file</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-scans-meta-nexus"></span><dl class="function">
<dt id="scans.meta.nexus">
<code class="descclassname">scans.meta.</code><code class="descname">nexus</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.meta.nexus" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">NEXUS load meta data from a nexus file</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-scans-meta-spec"></span><dl class="function">
<dt id="scans.meta.spec">
<code class="descclassname">scans.meta.</code><code class="descname">spec</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.meta.spec" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">SPEC load meta data from a spec file</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="scans-positions">
<h3>+scans/+positions<a class="headerlink" href="#scans-positions" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-scans-positions-load-from-file"></span><dl class="function">
<dt id="scans.positions.load_from_file">
<code class="descclassname">scans.positions.</code><code class="descname">load_from_file</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.positions.load_from_file" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Load positions from reconstruction file, useful e.g. when position</div>
<div class="line">refinement was done in the reconstruction used as a source file</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-scans-positions-matlab-pos"></span><dl class="function">
<dt id="scans.positions.matlab_pos">
<code class="descclassname">scans.positions.</code><code class="descname">matlab_pos</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.positions.matlab_pos" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">MATLAB_POS calculate scan parameters based on the values set in the</div>
<div class="line">template</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-scans-positions-nexus-soleil"></span><dl class="function">
<dt id="scans.positions.nexus_soleil">
<code class="descclassname">scans.positions.</code><code class="descname">nexus_soleil</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.positions.nexus_soleil" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">NEXUS_SOLEIL load motor positions from a nexus file</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-scans-positions-orchestra"></span><dl class="function">
<dt id="scans.positions.orchestra">
<code class="descclassname">scans.positions.</code><code class="descname">orchestra</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.positions.orchestra" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">OMNY Load positions from Orchestra scan file</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-scans-positions-spec"></span><dl class="function">
<dt id="scans.positions.spec">
<code class="descclassname">scans.positions.</code><code class="descname">spec</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.positions.spec" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">SPEC load motor positions from spec</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="scans-queue">
<h3>+scans/+queue<a class="headerlink" href="#scans-queue" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="scans-queue-check-queue">
<h3>+scans/+queue/+check_queue<a class="headerlink" href="#scans-queue-check-queue" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-scans-queue-check-queue-lockfile"></span><dl class="function">
<dt id="scans.queue.check_queue.lockfile">
<code class="descclassname">scans.queue.check_queue.</code><code class="descname">lockfile</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.queue.check_queue.lockfile" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">UNTITLED3 Summary of this function goes here</div>
<div class="line">Detailed explanation goes here</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p, status_ok</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-scans-queue-check-queue-omny"></span><dl class="function">
<dt id="scans.queue.check_queue.omny">
<code class="descclassname">scans.queue.check_queue.</code><code class="descname">omny</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.queue.check_queue.omny" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">OMNY Check for file queue for omny</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – p structure</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>p</strong> - p structure</li>
<li><strong>status_ok</strong> - status flag</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">see also <a class="reference internal" href="#ptycho-scans-get-queue"><span class="std std-ref">scans.get_queue</span></a></div>
</div>
</dd></dl>

<span class="target" id="ptycho-scans-queue-check-queue-remote-queue"></span><dl class="function">
<dt id="scans.queue.check_queue.remote_queue">
<code class="descclassname">scans.queue.check_queue.</code><code class="descname">remote_queue</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.queue.check_queue.remote_queue" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">REMOTE_QUEUE</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p, status_ok</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="scans-queue-check-queue-private">
<h3>+scans/+queue/+check_queue/private<a class="headerlink" href="#scans-queue-check-queue-private" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-scans-queue-check-queue-ptycho-parse-omny-dat"></span><dl class="function">
<dt id="scans.queue.check_queue.ptycho_parse_omny_dat">
<code class="descclassname">scans.queue.check_queue.</code><code class="descname">ptycho_parse_omny_dat</code><span class="sig-paren">(</span><em>filename</em>, <em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.queue.check_queue.ptycho_parse_omny_dat" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">p = ptycho_parse_omny_dat(filename,p)</div>
<div class="line">It parses dat files from OMNY or flOMNI to modify a ptychography</div>
<div class="line">p.structure. This allows for instance to change the scan number or</div>
<div class="line">another field. It also allows to define fields that do not exist.</div>
<div class="line">Inputs</div>
<div class="line">filename      Filename with path of the dat file</div>
<div class="line">p             Optional input, if it is given the output will be equal to p</div>
<div class="line">in all fields that are not modified</div>
<div class="line">Output</div>
<div class="line">p_out         Structure with new, or modified fields.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p_out</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="scans-queue-update-queue">
<h3>+scans/+queue/+update_queue<a class="headerlink" href="#scans-queue-update-queue" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-scans-queue-update-queue-omny"></span><dl class="function">
<dt id="scans.queue.update_queue.omny">
<code class="descclassname">scans.queue.update_queue.</code><code class="descname">omny</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.queue.update_queue.omny" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">UPDATE_OMNY_QUEUE</div>
</div>
</dd></dl>

<span class="target" id="ptycho-scans-queue-update-queue-remote-queue"></span><dl class="function">
<dt id="scans.queue.update_queue.remote_queue">
<code class="descclassname">scans.queue.update_queue.</code><code class="descname">remote_queue</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#scans.queue.update_queue.remote_queue" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">REMOTE_QUEUE</div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="analysis">
<h2>analysis<a class="headerlink" href="#analysis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="analysis-s00648">
<h3>analysis/S00648<a class="headerlink" href="#analysis-s00648" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="analysis-s00649">
<h3>analysis/S00649<a class="headerlink" href="#analysis-s00649" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="analysis-online">
<h3>analysis/online<a class="headerlink" href="#analysis-online" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="analysis-online-ptycho">
<h3>analysis/online/ptycho<a class="headerlink" href="#analysis-online-ptycho" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="tests">
<h2>tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<dl class="object">
<dt>
<code class="descname">CPU_binning_test</code></dt>
<dd><div class="line-block">
<div class="line">TEST TEMPLATE FOR FUNTIONALITY CHECK OF CPU ENGINES</div>
<div class="line">1) call standard template to get fresh settings defaults</div>
<div class="line">2) generate artificial data that should serve as a standart test “sample”</div>
<div class="line">3) call GPU engine with different basic functionalities and test if all still works</div>
<div class="line">!! THESE TEST ARE ONLY USEFUL TO FIND CRASHES IN THE CODE, QUALITY DETERIORATION STILL NEED TO BE MEASURED !!</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">CPU_engines_test</code></dt>
<dd><div class="line-block">
<div class="line">TEST TEMPLATE FOR FUNTIONALITY CHECK OF CPU ENGINES</div>
<div class="line">1) call standard template to get fresh settings defaults</div>
<div class="line">2) generate artificial data that should serve as a standart test “sample”</div>
<div class="line">3) call GPU engine with different basic functionalities and test if all still works</div>
<div class="line">!! THESE TEST ARE ONLY USEFUL TO FIND CRASHES IN THE CODE, QUALITY DETERIORATION STILL NEED TO BE MEASURED !!</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">CPU_multilayer_test</code></dt>
<dd><div class="line-block">
<div class="line">TEST TEMPLATE FOR FUNTIONALITY CHECK OF MULTILAYER EXTENSION IN CPU ENGINES</div>
<div class="line">1) call standard template to get fresh settings defaults</div>
<div class="line">2) generate artificial data that should serve as a standart test “sample”</div>
<div class="line">3) call GPU engine with different basic functionalities and test if all still works</div>
<div class="line">!! THESE TEST ARE ONLY USEFUL TO FIND CRASHES IN THE CODE, QUALITY DETERIORATION STILL NEED TO BE MEASURED !!</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">GPU_engines_test</code></dt>
<dd><div class="line-block">
<div class="line">TEST TEMPLATE FOR FUNTIONALITY CHECK IN GPU ENGINES</div>
<div class="line">1) call standard template to get fresh settings defaults</div>
<div class="line">2) generate artificial data that should serve as a standart test “sample”</div>
<div class="line">3) call GPU engine with different basic functionalities and test if all still works</div>
<div class="line">!! THESE TEST ARE ONLY USEFUL TO FIND CRASHES IN THE CODE, QUALITY DETERIORATION STILL NEED TO BE MEASURED !!</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">GPU_multilayer_3D_test</code></dt>
<dd><div class="line-block">
<div class="line">TEST TEMPLATE FOR FUNTIONALITY CHECK OF MULTILAYER EXTENSION IN GPU ENGINES</div>
<div class="line">1) call standard template to get fresh settings defaults</div>
<div class="line">2) generate artificial data that should serve as a standart test “sample”</div>
<div class="line">3) call GPU engine with different basic functionalities and test if all still works</div>
<div class="line">!! THESE TEST ARE ONLY USEFUL TO FIND CRASHES IN THE CODE, QUALITY DETERIORATION STILL NEED TO BE MEASURED !!</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">GPU_multilayer_test</code></dt>
<dd><div class="line-block">
<div class="line">TEST TEMPLATE FOR FUNTIONALITY CHECK OF MULTILAYER EXTENSION IN GPU ENGINES</div>
<div class="line">1) call standard template to get fresh settings defaults</div>
<div class="line">2) generate artificial data that should serve as a standart test “sample”</div>
<div class="line">3) call GPU engine with different basic functionalities and test if all still works</div>
<div class="line">!! THESE TEST ARE ONLY USEFUL TO FIND CRASHES IN THE CODE, QUALITY DETERIORATION STILL NEED TO BE MEASURED !!</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">run_test</code></dt>
<dd><div class="line-block">
<div class="line">Prepare the reconstruction</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">test_ML3D_data</code></dt>
<dd><div class="line-block">
<div class="line">template for artificial data generation for tests of multilayer</div>
<div class="line">reconstructions</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">test_ML_data</code></dt>
<dd><div class="line-block">
<div class="line">template for artificial data generation for tests of multilayer</div>
<div class="line">reconstructions</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">test_data</code></dt>
<dd><div class="line-block">
<div class="line">template for artificial data generation for standard methods tests</div>
</div>
</dd></dl>

<div class="section" id="tests-temp">
<h3>tests/temp<a class="headerlink" href="#tests-temp" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="utils">
<h2>utils<a class="headerlink" href="#utils" title="Permalink to this headline">¶</a></h2>
<span class="target" id="ptycho-utils-aligned-fsc"></span><dl class="function">
<dt>
<code class="descname">utils/aligned_FSC(file1, file2, params)</code></dt>
<dd><div class="line-block">
<div class="line">[resolution stat] = aligned_FSC(file1,file2,params)</div>
</div>
<div class="line-block">
<div class="line">Receives two filenames with path for ptychography reconstructions and a</div>
<div class="line">structure with parameters. The routine reads the reconstructions, matches</div>
<div class="line">the linear phase between them, registers the images, and returns the</div>
<div class="line">resolution estimates based on first and last crossing of the FSC with the</div>
<div class="line">threshold.</div>
</div>
<div class="line-block">
<div class="line">References relevant to this code:</div>
<div class="line">For using this FSC code with ptychography: J. Vila-Comamala, et al., “Characterization of high-resolution diffractive X-ray optics by ptychographic coherent diffractive imaging,” Opt. Express 19, 21333-21344 (2011).</div>
<div class="line">For subpixel alignment: M. Guizar-Sicairos, et al., “Efficient subpixel image registration algorithms,” Opt. Lett. 33, 156 (2008).</div>
<div class="line">For matching of phase ramp by approximate least squared error:  M. Guizar-Sicairos, et al., “Phase tomography from x-ray coherent diffractive imaging projections,” Opt. Express 19, 21345-21357 (2011).</div>
</div>
<div class="line-block">
<div class="line">Outputs:</div>
</div>
<div class="line-block">
<div class="line">resolution    A two element variable that contains the resolution</div>
<div class="line">obtained from first and last crossing of the FSC curve with</div>
<div class="line">the threshold curve.</div>
<div class="line">stat          structure containing other statistics such as</div>
<div class="line">spectral signal to noise ratio (SSNR), average SNR and area under FSC curve</div>
</div>
<div class="line-block">
<div class="line">Inputs:</div>
</div>
<div class="line-block">
<div class="line">file1     Filename with path of reconstruction 1</div>
<div class="line">file2     Filename with path of reconstruction 2</div>
<div class="line">params    Structure with parameters as describred below</div>
</div>
<div class="line-block">
<div class="line">params.flipped_images    Flip one input image horizontally (= true or false).</div>
<div class="line">Useful when comparing 0 and 180 degree projections</div>
<div class="line">in tomography (default = false).</div>
<div class="line">params.crop      = ‘’;       for using the default half size of the probe</div>
<div class="line">= ‘manual’  for using GUI to select region. This will display the range, e.g. {600:800, 600:800}</div>
<div class="line">= {600:800, 600:800} for custom vertical and horizontal cropping, respectively</div>
<div class="line">params.GUIguess  To click for an initial alignment guess, if used it ignores</div>
<div class="line">the values of params.guessx and params.guessy (default</div>
<div class="line">= false)</div>
<div class="line">params.guessx</div>
<div class="line">params.guessy        An intial guess for x and y alignment (default = [])</div>
<div class="line">params.remove_ramp   Try to remove linear phase from whole image before initial</div>
<div class="line">alignment (default = true)</div>
<div class="line">params.image_prop    = ‘complex’</div>
<div class="line">= ‘phasor’ (phase with unit amplitude, default)</div>
<div class="line">= ‘phase’  (Note: phase should not be used if there is phase wrapping)</div>
<div class="line">params.taper         = 20 (default)   Pixels to taper images - Increase until the FSC does not change anymore</div>
<div class="line">params.plotting      Display plots (default = false)</div>
<div class="line">params.dispfsc       Display FSC plot (default = true)</div>
<div class="line">params.SNRt          SNR for FSC threshold curve</div>
<div class="line">SNRt = 0.2071 for 1/2 bit threshold for resolution of the average of the 2 images</div>
<div class="line">SNRt = 0.5    for 1   bit threshold for resolution of each individual image (default)</div>
<div class="line">params.thickring     Thickness of Fourier domain ring for FSC in pixels (default = 1)</div>
<div class="line">params.freq_thr      To ignore the crossings before freq_thr for determining resolution (default 0.02)</div>
<div class="line">params.out_fn        Filename of output of jpeg for FSC</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">resolution stat</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-utils-break-check"></span><dl class="function">
<dt>
<code class="descname">utils/break_check(filename)</code></dt>
<dd><div class="line-block">
<div class="line">[] = break_check(filename)</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">calculate_round_roi</code></dt>
<dd><div class="line-block">
<div class="line">Data path info</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">change_file_names</code></dt>
<dd><div class="line-block">
<div class="line">change_file_names.m</div>
<div class="line">small script  to remove lock files from certain scans</div>
</div>
</dd></dl>

<span class="target" id="ptycho-utils-check-option"></span><dl class="function">
<dt>
<code class="descname">utils/check_option(p, option_name, required_value)</code></dt>
<dd><div class="line-block">
<div class="line">CHECK_OPTION</div>
<div class="line">check if required option exists and is equal to the given value,</div>
<div class="line">otherwise return false</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">out_value</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-utils-check-scan-interruption"></span><dl class="function">
<dt>
<code class="descname">utils/check_scan_interruption(specLogFile, scanno)</code></dt>
<dd><div class="line-block">
<div class="line">Detect an interruption of the scan in the Log file</div>
<div class="line">From spec compile  post_scan.mac</div>
<div class="line">= 1, if the scan is ready for processing</div>
<div class="line">= 0, if the scan was interrupted and is not yet repeated, or if the scan</div>
<div class="line">is being repeated now</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">out</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-utils-create-file-queue"></span><dl class="function">
<dt>
<code class="descname">utils/create_file_queue(start, stop, step, varargin)</code></dt>
<dd><div class="line-block">
<div class="line">CREATE_FILE_QUEUE create directories and .dat files for a file queue</div>
<div class="line">only needed if OMNY/flOMNI is not available</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> – start scan number</li>
<li><strong>stop</strong> – stop scan number</li>
<li><strong>step</strong> – reconstruction bundle size</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><em>optional</em>        given as name/value pair</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dirpath</strong> – path to the .dat files directory; default: ‘../’</li>
<li><strong>prop</strong> – structure with parameters that need to be saved to the .dat file</li>
<li><strong>prop_name</strong> – structure name; default: ‘p’</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">EXAMPLE:</div>
<div class="line">s.lockfile = false;</div>
<div class="line">s.energy = 6.2015;</div>
<div class="line">s.check_2_detpos = 588.734;</div>
<div class="line">s.check_nextscan_started = 1;</div>
</div>
<div class="line-block">
<div class="line">create_file_queue(646, 650, 2, ‘prop’, s)</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">find_file_names</code></dt>
<dd><div class="line-block">
<div class="line">change_file_names.m</div>
<div class="line">small script  to remove lock files from certain scans</div>
</div>
</dd></dl>

<span class="target" id="ptycho-utils-find-ptycho-filename"></span><dl class="function">
<dt>
<code class="descname">utils/find_ptycho_filename(base_analysis_path, varargin)</code></dt>
<dd><div class="line-block">
<div class="line">filename_with_path = find_ptycho_filename(base_analysis_path,scan_number,fileprefix,filesuffix)</div>
<div class="line">Looks for a ptychography reconstruction name inside the path given as</div>
<div class="line">initial argument. I will look in the folder given and also try with</div>
<div class="line">adding analysis. If the scan_number is given it will compile an analysis</div>
<div class="line">folder and look for it.  e.g. find_ptycho_filename(‘~/Data10’,235);</div>
<div class="line">Use verbose(2) in order to see all directories and names attempted.</div>
<div class="line">Inputs</div>
<div class="line">base_analysis_path    % String with path to start looking</div>
<div class="line">scan_number           % (optional) Number with the scan number, used to</div>
<div class="line">compile folder</div>
<div class="line">fileprefix            % String specifying the starting of the name</div>
<div class="line">filesuffix            % String specifying the ending of the name</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">filename_with_path</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-utils-fun-align-img"></span><dl class="function">
<dt>
<code class="descname">utils/fun_align_img(img1, img2, asize, pix)</code></dt>
<dd><div class="line-block">
<div class="line">[resolution] = aligned_FSC(file1,file2,params)</div>
</div>
<div class="line-block">
<div class="line">Receives two filenames with path for ptychography reconstructions and a</div>
<div class="line">structure with parameters. The routine reads the reconstructions, matches</div>
<div class="line">the linear phase between them, registers the images, and returns the</div>
<div class="line">resolution estimates based on first and last crossing of the FSC with the</div>
<div class="line">threshold.</div>
</div>
<div class="line-block">
<div class="line">References relevant to this code:</div>
<div class="line">For using this FSC code with ptychography: J. Vila-Comamala, et al., “Characterization of high-resolution diffractive X-ray optics by ptychographic coherent diffractive imaging,” Opt. Express 19, 21333-21344 (2011).</div>
<div class="line">For subpixel alignment: M. Guizar-Sicairos, et al., “Efficient subpixel image registration algorithms,” Opt. Lett. 33, 156 (2008).</div>
<div class="line">For matching of phase ramp by approximate least squared error:  M. Guizar-Sicairos, et al., “Phase tomography from x-ray coherent diffractive imaging projections,” Opt. Express 19, 21345-21357 (2011).</div>
</div>
<div class="line-block">
<div class="line">Outputs:</div>
</div>
<div class="line-block">
<div class="line">resolution    A two element variable that contains the resolution</div>
<div class="line">obtained from first and last crossing of the FSC curve with</div>
<div class="line">the threshold curve.</div>
</div>
<div class="line-block">
<div class="line">Inputs:</div>
</div>
<div class="line-block">
<div class="line">file1     Filename with path of reconstruction 1</div>
<div class="line">file2     Filename with path of reconstruction 2</div>
<div class="line">params    Structure with parameters as described below</div>
</div>
<div class="line-block">
<div class="line">params.flipped_images    Flip one input image horizontally (= true or false).</div>
<div class="line">Useful when comparing 0 and 180 degree projections</div>
<div class="line">in tomography (default = false).</div>
<div class="line">params.crop      = ‘’;       for using the default half size of the probe</div>
<div class="line">= ‘manual’  for using GUI to select region. This will display the range, e.g. {600:800, 600:800}</div>
<div class="line">= {600:800, 600:800} for custom vertical and horizontal cropping, respectively</div>
<div class="line">params.GUIguess  To click for an initial alignment guess, if used it ignores</div>
<div class="line">the values of params.guessx and params.guessy (default</div>
<div class="line">= false)</div>
<div class="line">params.guessx</div>
<div class="line">params.guessy        An intial guess for x and y alignment (default = [])</div>
<div class="line">params.remove_ramp   Try to remove linear phase from whole image before initial</div>
<div class="line">alignment (default = true)</div>
<div class="line">params.image_prop    = ‘complex’</div>
<div class="line">= ‘phasor’ (phase with unit amplitude, default)</div>
<div class="line">= ‘phase’  (Note: phase should not be used if there is phase wrapping)</div>
<div class="line">params.taper         = 20 (default)   Pixels to taper images - Increase until the FSC does not change anymore</div>
<div class="line">params.plotting      Display plots (default = false)</div>
<div class="line">params.dispfsc       Display FSC plot (default = true)</div>
<div class="line">params.SNRt          SNR for FSC threshold curve</div>
<div class="line">SNRt = 0.2071 for 1/2 bit threshold for resolution of the average of the 2 images</div>
<div class="line">SNRt = 0.5    for 1   bit threshold for resolution of each individual image (default)</div>
<div class="line">params.thickring     Thickness of Fourier domain ring for FSC in pixels (default = 1)</div>
<div class="line">params.freq_thr      To ignore the crossings before freq_thr for determining resolution (default 0.02)</div>
<div class="line">params.out_fn        Filename of output of jpeg for FSC</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">img1_aligned, img2_aligned, delta_all</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-utils-integrate-frames"></span><dl class="function">
<dt>
<code class="descname">utils/integrate_frames(base_path, scan_num, plotfigure, det_num, savedata, maskfile)</code></dt>
<dd><div class="line-block">
<div class="line">14-11-2012</div>
<div class="line">Integrates frames from a loopscan</div>
</div>
<div class="line-block">
<div class="line">Syntax:</div>
<div class="line">[int] = integrate_frames(base_path,scan_num,plotfigure,det_num,savedata,maskfilename)</div>
<div class="line">Needed parameters: base_path (e.g. ‘~/Data10/’)</div>
<div class="line">scan_num   (scan number)</div>
<div class="line">Optional parameters: plotfigure (figure number for fial plot, 0 for no plotting, by default is 0)</div>
<div class="line">det_num (detector number, default 1)</div>
<div class="line">savedata (=1 to save data in ‘analysis/integrated_frames/’, default 0)</div>
<div class="line">maskfilename (valid mask file name. If empty [], no mask used)</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-utils-loopregerror"></span><dl class="function">
<dt>
<code class="descname">utils/loopregerror(deltastack, filt_stackFT, xmask, ymask)</code></dt>
<dd><div class="line-block">
<div class="line">Evaluate registration error in an angle series. Returns the error between</div>
<div class="line">subsequent images. The last image is evaluated against the first but</div>
<div class="line">flipped in x. Recieves image FT with DC in (1,1), the image should have</div>
<div class="line">had the center in center of array.</div>
<div class="line">filt_stackFT  FT of stack of images, previously filtered if needed</div>
<div class="line">deltastack    Estimates of positions</div>
<div class="line">xmax          Vector with positions of horizontal edges of rectangular</div>
<div class="line">window for registration</div>
<div class="line">ymax          Same as xmax but vertical edges of window</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">errorreg grad</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">make_lock_files</code></dt>
<dd><div class="line-block">
<div class="line">make_lock_files is a script.</div>
</div>
</dd></dl>

<span class="target" id="ptycho-utils-phase-from-dpc"></span><dl class="function">
<dt>
<code class="descname">utils/phase_from_dpc(dpcx, dpcy, varargin)</code></dt>
<dd><div class="line-block">
<div class="line">Integrates the phase from a combination of x and y gradients.</div>
<div class="line">phase_from_dpc(dpcx,dpcy,’fourier’) uses the Fourier method (default),</div>
<div class="line">phase_from_dpc(dpcx,dpcy,’finitdiff’) uses a finite difference method.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">propagate_probe</code></dt>
<dd><div class="line-block">
<div class="line">propagate_probe.m</div>
<div class="line">Warning: Currently working only for square pixels</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">remove_lock_files</code></dt>
<dd><div class="line-block">
<div class="line">remove_lock_files.m</div>
<div class="line">small script  to remove lock files from certain scans</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">remove_lock_files_select</code></dt>
<dd><div class="line-block">
<div class="line">remove_lock_files.m</div>
<div class="line">small script  to remove lock files from certain scans</div>
</div>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">round_roi_new_stxm</code></dt>
<dd><div class="line-block">
<div class="line">Another script for STXM evaluation of round roi scans</div>
</div>
<div class="line-block">
<div class="line">Does not use Gaussians centered on grid points which leads to inaccuarate</div>
<div class="line">values at the center positions (due to adding up all the Gaussians)</div>
<div class="line">but rather uses the Matlab’s “griddata” function.</div>
</div>
</dd></dl>

<span class="target" id="ptycho-utils-round-roi-numpts"></span><dl class="function">
<dt>
<code class="descname">utils/round_roi_numpts(lx, ly, dr, nth)</code></dt>
<dd><div class="line-block">
<div class="line">Usage:</div>
<div class="line">function numpts = round_roi_numpts(lx,ly,dr,nth)</div>
</div>
<div class="line-block">
<div class="line">Description:</div>
<div class="line">Calculates the number of points of a round roi scan</div>
<div class="line">for a set of parameters used in a Spec call.</div>
</div>
<div class="line-block">
<div class="line">Parameters:</div>
<div class="line">lx = horizontal field of view in meter</div>
<div class="line">ly = vertical field of view in meter</div>
<div class="line">dr = radial shell step size in meter</div>
<div class="line">dth = angluar intervals in first shell</div>
</div>
<div class="line-block">
<div class="line">Changelog:</div>
<div class="line">2010-12-04, First version.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">numpts</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-utils-set-all-engines"></span><dl class="function">
<dt>
<code class="descname">utils/set_all_engines(p, parameter, value)</code></dt>
<dd><div class="line-block">
<div class="line">function  p = set_all_engines(p, parameter, value)</div>
<div class="line">set given parameter to all engines</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">show_recons</code></dt>
<dd><div class="line-block">
<div class="line">show recons.m</div>
<div class="line">Warning: Currently working only for square pixels</div>
<div class="line">close all   % Recommended if improfile will be used (there is a bug with cursor positioning otherwise)</div>
<div class="line">Mayor changes, basically rewritten, made on Oct 19, 2015 in order to accomodate waiting for</div>
</div>
</dd></dl>

<span class="target" id="ptycho-utils-unwrap-pilatus-weird"></span><dl class="function">
<dt>
<code class="descname">utils/unwrap_pilatus_weird(frame_low, frame_high, varargin)</code></dt>
<dd><div class="line-block">
<div class="line">[frame_unwrapped, frame_replaced_from_lowcount] = unwrap_pilatus(frame_low, frame_high, numbad, slope)</div>
</div>
<div class="line-block">
<div class="line">unwraps the pilatus pixels that had too high intensity.</div>
<div class="line">slope and numbad are optional.</div>
<div class="line">slope should be (high exposure time / low exposure time), but can be</div>
<div class="line">evaluated from the data.</div>
<div class="line">numbad is the rough number of bad pixels - it should be greater than the actual</div>
<div class="line">value. It is used only if the slope needs to be evaluated.</div>
</div>
<div class="line-block">
<div class="line">The first output is the result of unwrapping the high intensity counts.</div>
<div class="line">The second is equal to the high intensity frame with all wrapped values</div>
<div class="line">replaced with scaled counts from the low exposure frame. These two should</div>
<div class="line">be equal, but the first output is biased by the intensity correction done</div>
<div class="line">by the pilatus.</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">varargout</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="utils-soleil">
<h3>utils/+soleil<a class="headerlink" href="#utils-soleil" title="Permalink to this headline">¶</a></h3>
<span class="target" id="ptycho-utils-soleil-soleil-compile-swing-dirname"></span><dl class="function">
<dt>
<code class="descname">utils/+soleil/soleil.compile_swing_dirname(scan_no)</code></dt>
<dd><div class="line-block">
<div class="line">COMPILE_SWING_DIRNAME returns the default SWING directory tree for a</div>
<div class="line">given scan number</div>
</div>
<div class="line-block">
<div class="line">EXAMPLE:</div>
<div class="line">scan_dir = compile_SWING_dirname(10);</div>
<div class="line">-&gt; scan_dir = ‘S00000-00999/’</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">scan_dir</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="ptycho-utils-soleil-soleil-get-filenames-swing"></span><dl class="function">
<dt>
<code class="descname">utils/+soleil/soleil.get_filenames_swing(p)</code></dt>
<dd><div class="line-block">
<div class="line">GET_FILENAMES_SWING compile filenames of raw data files</div>
<div class="line">receives</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">p</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="utils-imgs">
<h3>utils/imgs<a class="headerlink" href="#utils-imgs" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ptycho_license.html" class="btn btn-neutral float-right" title="Academic License Agreement" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="base_func_doc.html" class="btn btn-neutral" title="base package documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, CXS group.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>